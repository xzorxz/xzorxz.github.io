{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/companys/companys-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/companys/companys-add.vue","mtime":1668225793864},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/thread-loader/dist/cjs.js","mtime":1666491532143},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8vIGltcG9ydCB7IHVwZGF0ZSwgYWRkIH0gZnJvbSAnQC9hcGkvYmFzZS91c2VycycKaW1wb3J0IHsgZGV0YWlsLCBhZGQsIHVwZGF0ZSB9IGZyb20gJ0AvYXBpL2htbW0vY29tcGFueXMnCmltcG9ydCBNeUNpdHkgZnJvbSAnLi9jaXR5cycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDb21wYW55c0FkZCcsCiAgY29tcG9uZW50czogewogICAgTXlDaXR5CiAgfSwKICBwcm9wczogewogICAgLy8g5o6l5pS25LuO5aSN57uE5Lu25Lit5Lyg5YWl55qE5YWs5Y+457yW5Y+3CiAgICBjb21wYW55SWQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwgLy8g6L+Z5Liq5bGe5oCn5Y+v5Lul5piv5a2X56ym5Liy77yM5Lmf5Y+v5Lul5pivTnVtYmVyCiAgICAgIHJlcXVpcmVkOiBmYWxzZSAvLyDov5nkuKrlsZ7mgKflubbkuI3mmK/lv4XpobvnmoQKICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybURhdGE6IHsKICAgICAgICBpc0ZhbW91czogZmFsc2UsIC8vIOaYr+WQpuaYr+WQjeS8gQogICAgICAgIHNob3J0TmFtZTogJycsIC8vIOeugOWGmQogICAgICAgIGNvbXBhbnk6ICcnLCAvLyDlkI3lrZcKICAgICAgICBwcm92QW5kQ2l0eTogeyAvLyDln47luIIKICAgICAgICAgIHByb3ZpbmNlOiAnJywKICAgICAgICAgIGNpdHk6ICcnCiAgICAgICAgfSwKICAgICAgICB0YWdzOiAnJywgLy8g5qCH562+CiAgICAgICAgcmVtYXJrczogJycgLy8g5aSH5rOoCiAgICAgIH0sCiAgICAgIC8vIOihqOWNlemqjOivgQogICAgICBydWxlSW5saW5lOiB7CiAgICAgICAgc2hvcnROYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn5LyB5Lia566A56ew5LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIHRhZ3M6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36K+36L6T5qCH562+JywgdHJpZ2dlcjogJ2JsdXInIH1dCiAgICAgIH0KICAgIH0KICB9LAogIC8vIOWIm+W7uuWujOavleeKtuaAgQogIGNyZWF0ZWQgKCkgewogICAgLy8g5piv5ZCm5Lyg5YWl5LqG5YWs5Y+457yW5Y+344CCCiAgICAvLyDlpoLmnpzkvKDlhaXvvIzor7TmmI7mmK/nvJbovpHvvIzlkKbliJnmmK/mt7vliqAKICAgIGlmICh0aGlzLmNvbXBhbnlJZCkgewogICAgICB0aGlzLmxvYWREZXRhaWwoKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Zyo57yW6L6R5oOF5Ya15LiL77yM6I635Y+W6K+m5oOFCiAgICBhc3luYyBsb2FkRGV0YWlsICgpIHsKICAgICAgY29uc3QgeyBjb21wYW55SWQgfSA9IHRoaXMKICAgICAgaWYgKCFjb21wYW55SWQpIHsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICB0aGlzLmZvcm1EYXRhLmlkID0gY29tcGFueUlkCiAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCBkZXRhaWwoeyBpZDogY29tcGFueUlkIH0pCiAgICAgIC8vIOiOt+WPluivpuaDhSDnu5lmb3JtRGF0YQogICAgICByZXMucHJvdkFuZENpdHkgPSB7CiAgICAgICAgcHJvdmluY2U6IHJlcy5wcm92aW5jZSwKICAgICAgICBjaXR5OiByZXMuY2l0eQogICAgICB9CiAgICAgIHJlcy5pc0ZhbW91cyA9ICEhcmVzLmlzRmFtb3VzCiAgICAgIHRoaXMuZm9ybURhdGEgPSByZXMKICAgIH0sCiAgICAvLyDlgZrnvJbovpEKICAgIGFzeW5jIGRvVXBkYXRlICgpIHsKICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAuLi50aGlzLmZvcm1EYXRhLAogICAgICAgIHByb3ZpbmNlOiB0aGlzLmZvcm1EYXRhLnByb3ZBbmRDaXR5LnByb3ZpbmNlLAogICAgICAgIGNpdHk6IHRoaXMuZm9ybURhdGEucHJvdkFuZENpdHkuY2l0eQogICAgICB9CiAgICAgIGF3YWl0IHVwZGF0ZShkYXRhKQogICAgICB0aGlzLmVtaXQoKQogICAgfSwKICAgIC8vIOWBmua3u+WKoAogICAgYXN5bmMgZG9BZGQgKCkgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IGFkZCh7CiAgICAgICAgICAuLi50aGlzLmZvcm1EYXRhLAogICAgICAgICAgcHJvdmluY2U6IHRoaXMuZm9ybURhdGEucHJvdkFuZENpdHkucHJvdmluY2UsCiAgICAgICAgICBjaXR5OiB0aGlzLmZvcm1EYXRhLnByb3ZBbmRDaXR5LmNpdHkKICAgICAgICB9KQogICAgICAgIHRoaXMuZW1pdCgpCiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgfQogICAgfSwKICAgIC8vIOWRiuivieeItue7hOS7tuWujOaIkOS6hgogICAgZW1pdCAoKSB7CiAgICAgIC8vIHRoaXMuJGxpc3RlbmVyczog6Ieq5Yqo5Lya5pS26ZuG5omA5pyJ5Yqg5Zyo6L+Z5Liq57uE5Lu25LiK55qE5LqL5Lu255uR5ZCsCiAgICAgIHRoaXMuJGxpc3RlbmVycy5jbG9zZSAmJiB0aGlzLiRlbWl0KCdjbG9zZScpCiAgICAgIHRoaXMuJGxpc3RlbmVycy5yZWZyZXNoICYmIHRoaXMuJGVtaXQoJ3JlZnJlc2gnKQogICAgfSwKICAgIC8vIOihqOWNleaPkOS6pAogICAgaEFkZG9yVXBkYXRlICgpIHsKICAgICAgdGhpcy4kcmVmcy5kYXRhRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgLy8g6LaB5pep6L+U5ZueCiAgICAgICAgaWYgKCF2YWxpZCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignKuWPt+S4uuW/heWhq+mhuSEnKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIC8vIOWmguaenOaciWNvbXBhbnlJZOivtOaYjuaYr+e8lui+ke+8jOWBmmRvVXBkYXRlCiAgICAgICAgdGhpcy5jb21wYW55SWQgPyB0aGlzLmRvVXBkYXRlKCkgOiB0aGlzLmRvQWRkKCkKICAgICAgfSkKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBjSXNTaG93Q2FuY2VsICgpIHsKICAgICAgcmV0dXJuICEhdGhpcy4kbGlzdGVuZXJzLmNsb3NlCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["companys-add.vue"],"names":[],"mappings":";AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"companys-add.vue","sourceRoot":"src/module-hmmm/pages/companys","sourcesContent":["<template>\n  <div class=\"add-form\">\n    <el-form\n      :rules=\"ruleInline\"\n      ref=\"dataForm\"\n      :model=\"formData\"\n      label-position=\"left\"\n      label-width=\"150px\"\n      style=\"width: 80%; margin-left:10px;\"\n    >\n      <el-form-item label=\"企业名称\" prop=\"shortName\">\n        <el-input v-model=\"formData.shortName\"></el-input>\n        <el-checkbox v-model=\"formData.isFamous\">是否为名企</el-checkbox>\n      </el-form-item>\n      <el-form-item label=\"所属公司\" prop=\"company\">\n        <el-input v-model=\"formData.company\"></el-input>\n        <p>https://www.tianyancha.com （在此可查询所属公司全称及简称）</p>\n      </el-form-item>\n      <el-form-item label=\"城市\">\n        <MyCity v-model=\"formData.provAndCity\"/>\n      </el-form-item>\n      <el-form-item label=\"方向（企业标签）\" prop=\"tags\">\n        <el-input v-model=\"formData.tags\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"备注\" prop=\"remarks\">\n        <el-input\n          type=\"textarea\"\n          :autosize=\"{ minRows: 2, maxRows: 4}\"\n          placeholder=\"请输入\"\n          v-model=\"formData.remarks\"\n        ></el-input>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" @click=\"hAddorUpdate\">{{$t('table.confirm')}}</el-button>\n        <el-button v-if=\"cIsShowCancel\" @click=\"$emit('close')\">{{$t('table.cancel')}}</el-button>\n      </el-form-item>\n    </el-form>\n  </div>\n</template>\n<script>\n// import { update, add } from '@/api/base/users'\nimport { detail, add, update } from '@/api/hmmm/companys'\nimport MyCity from './citys'\nexport default {\n  name: 'CompanysAdd',\n  components: {\n    MyCity\n  },\n  props: {\n    // 接收从复组件中传入的公司编号\n    companyId: {\n      type: [String, Number], // 这个属性可以是字符串，也可以是Number\n      required: false // 这个属性并不是必须的\n    }\n  },\n  data () {\n    return {\n      formData: {\n        isFamous: false, // 是否是名企\n        shortName: '', // 简写\n        company: '', // 名字\n        provAndCity: { // 城市\n          province: '',\n          city: ''\n        },\n        tags: '', // 标签\n        remarks: '' // 备注\n      },\n      // 表单验证\n      ruleInline: {\n        shortName: [\n          { required: true, message: '企业简称不能为空', trigger: 'blur' }\n        ],\n        tags: [{ required: true, message: '请请输标签', trigger: 'blur' }]\n      }\n    }\n  },\n  // 创建完毕状态\n  created () {\n    // 是否传入了公司编号。\n    // 如果传入，说明是编辑，否则是添加\n    if (this.companyId) {\n      this.loadDetail()\n    }\n  },\n  methods: {\n    // 在编辑情况下，获取详情\n    async loadDetail () {\n      const { companyId } = this\n      if (!companyId) {\n        return\n      }\n      this.formData.id = companyId\n      const { data: res } = await detail({ id: companyId })\n      // 获取详情 给formData\n      res.provAndCity = {\n        province: res.province,\n        city: res.city\n      }\n      res.isFamous = !!res.isFamous\n      this.formData = res\n    },\n    // 做编辑\n    async doUpdate () {\n      const data = {\n        ...this.formData,\n        province: this.formData.provAndCity.province,\n        city: this.formData.provAndCity.city\n      }\n      await update(data)\n      this.emit()\n    },\n    // 做添加\n    async doAdd () {\n      try {\n        await add({\n          ...this.formData,\n          province: this.formData.provAndCity.province,\n          city: this.formData.provAndCity.city\n        })\n        this.emit()\n      } catch (err) {\n        console.log(err)\n      }\n    },\n    // 告诉父组件完成了\n    emit () {\n      // this.$listeners: 自动会收集所有加在这个组件上的事件监听\n      this.$listeners.close && this.$emit('close')\n      this.$listeners.refresh && this.$emit('refresh')\n    },\n    // 表单提交\n    hAddorUpdate () {\n      this.$refs.dataForm.validate(valid => {\n        // 趁早返回\n        if (!valid) {\n          this.$message.error('*号为必填项!')\n          return\n        }\n        // 如果有companyId说明是编辑，做doUpdate\n        this.companyId ? this.doUpdate() : this.doAdd()\n      })\n    }\n  },\n  computed: {\n    cIsShowCancel () {\n      return !!this.$listeners.close\n    }\n  }\n}\n</script>\n<style>\n.el-form--label-left .el-form-item__label {\n  text-align: right;\n}\n.el-form-item--medium {\n  margin-bottom: 22px;\n}\n.el-dialog__footer {\n  text-align: center;\n}\n</style>\n"]}]}