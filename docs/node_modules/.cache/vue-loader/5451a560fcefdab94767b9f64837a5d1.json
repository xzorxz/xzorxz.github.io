{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/components/companys-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/components/companys-add.vue","mtime":1668225793863},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/thread-loader/dist/cjs.js","mtime":1666491532143},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHVwZGF0ZSwgYWRkIH0gZnJvbSAnQC9hcGkvYmFzZS91c2VycycKaW1wb3J0IHsgcHJvdmluY2VzLCBjaXR5cyB9IGZyb20gJ0AvYXBpL2htbW0vY2l0eXMuanMnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29tcGFueXNBZGQnLAogIHByb3BzOiB7CiAgICB0aXRsZUluZm86IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGZvcm1CYXNlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBjaXR5U2VsZWN0OiB7CiAgICAgICAgcHJvdmluY2U6IFtdLAogICAgICAgIGNpdHlEYXRlOiBbXQogICAgICB9LAogICAgICAvLyDooajljZXpqozor4EKICAgICAgcnVsZUlubGluZTogewogICAgICAgIHNob3J0TmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+S8geS4mueugOensOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBwcm92aW5jZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeecgeS7vScsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICBdLAogICAgICAgIHRhZ3M6IFt7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36K+36L6T5qCH562+JywgdHJpZ2dlcjogJ2JsdXInIH1dCiAgICAgIH0KICAgIH0KICB9LAogIGNvbXB1dGVkOiB7fSwKICBtZXRob2RzOiB7CiAgICAvLyDlvLnlsYLmmL7npLoKICAgIGRpYWxvZ0Zvcm1WICgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUKICAgIH0sCiAgICAvLyDlvLnlsYLpmpDol48KICAgIGRpYWxvZ0Zvcm1IICgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgLy8g6I635Y+W55yBCiAgICBnZXRDaXR5RGF0YTogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLmNpdHlTZWxlY3QucHJvdmluY2UgPSBwcm92aW5jZXMoKQogICAgfSwKICAgIC8vIOmAieecgeiOt+WPluWIsOW4ggogICAgaGFuZGxlUHJvdmluY2U6IGZ1bmN0aW9uIChlKSB7CiAgICAgIHRoaXMuY2l0eVNlbGVjdC5jaXR5RGF0ZSA9IGNpdHlzKGUpCiAgICAgIHRoaXMuZm9ybUJhc2UuY2l0eSA9IHRoaXMuY2l0eVNlbGVjdC5jaXR5RGF0ZVswXQogICAgfSwKICAgIC8vIOihqOWNleaPkOS6pAogICAgY3JlYXRlRGF0YSAoKSB7CiAgICAgIHRoaXMuJHJlZnMuZGF0YUZvcm0udmFsaWRhdGUoYXN5bmMgdmFsaWQgPT4gewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgdGhpcy5kaWFsb2dGb3JtSCgpCiAgICAgICAgICBjb25zdCBkYXRhID0gewogICAgICAgICAgICAuLi50aGlzLmZvcm1CYXNlCiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5mb3JtQmFzZS5pZCkgewogICAgICAgICAgICBhd2FpdCB1cGRhdGUoZGF0YSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy4kZW1pdCgnbmV3RGF0YWVzJywgdGhpcy5mb3JtQmFzZSkKICAgICAgICAgICAgfSkKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGF3YWl0IGFkZCh0aGlzLmZvcm1CYXNlKS50aGVuKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLiRlbWl0KCduZXdEYXRhZXMnLCB0aGlzLmZvcm1CYXNlKQogICAgICAgICAgICB9KQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCcq5Y+35Li65b+F5aGr6aG5IScpCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["companys-add.vue"],"names":[],"mappings":";AA4DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"companys-add.vue","sourceRoot":"src/module-hmmm/components","sourcesContent":["<template>\n  <div class=\"add-form\">\n    <el-dialog :title=\"titleInfo.text+titleInfo.pageTitle\" :visible.sync=\"dialogFormVisible\">\n      <el-form\n        :rules=\"ruleInline\"\n        ref=\"dataForm\"\n        :model=\"formBase\"\n        label-position=\"left\"\n        label-width=\"150px\"\n        style=\"width: 80%; margin-left:10px;\"\n      >\n        <el-form-item label=\"企业名称\" prop=\"shortName\">\n          <el-input v-model=\"formBase.shortName\"></el-input>\n          <el-checkbox v-model=\"formBase.isFamous\">是否为名企</el-checkbox>\n        </el-form-item>\n        <el-form-item label=\"所属公司\" prop=\"company\">\n          <el-input v-model=\"formBase.company\"></el-input>\n          <p>https://www.tianyancha.com （在此可查询所属公司全称及简称）</p>\n        </el-form-item>\n        <el-form-item label=\"城市\" prop=\"province\">\n          <el-select\n            class=\"filter-item\"\n            style=\"width: 130px;\"\n            v-model=\"formBase.province\"\n            @keyup.enter=\"handleFilter\"\n            @change=\"handleProvince\"\n            filterable\n          >\n            <el-option v-for=\"item in citySelect.province\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\n          </el-select>\n          <el-select\n            class=\"filter-item\"\n            style=\"width: 130px;\"\n            v-model=\"formBase.city\"\n            @keyup.enter=\"handleFilter\"\n            filterable\n          >\n            <el-option v-for=\"item in citySelect.cityDate\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"方向（企业标签）\" prop=\"tags\">\n          <el-input v-model=\"formBase.tags\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\" prop=\"remarks\">\n          <el-input\n            type=\"textarea\"\n            :autosize=\"{ minRows: 2, maxRows: 4}\"\n            placeholder=\"请输入\"\n            v-model=\"formBase.remarks\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormH\">{{$t('table.cancel')}}</el-button>\n        <el-button type=\"primary\" @click=\"createData\">{{$t('table.confirm')}}</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n<script>\nimport { update, add } from '@/api/base/users'\nimport { provinces, citys } from '@/api/hmmm/citys.js'\nexport default {\n  name: 'CompanysAdd',\n  props: {\n    titleInfo: {\n      type: Object,\n      required: true\n    },\n    formBase: {\n      type: Object,\n      required: true\n    }\n  },\n  data () {\n    return {\n      dialogFormVisible: false,\n      citySelect: {\n        province: [],\n        cityDate: []\n      },\n      // 表单验证\n      ruleInline: {\n        shortName: [\n          { required: true, message: '企业简称不能为空', trigger: 'blur' }\n        ],\n        province: [\n          { required: true, message: '请选择省份', trigger: 'change' }\n        ],\n        tags: [{ required: true, message: '请请输标签', trigger: 'blur' }]\n      }\n    }\n  },\n  computed: {},\n  methods: {\n    // 弹层显示\n    dialogFormV () {\n      this.dialogFormVisible = true\n    },\n    // 弹层隐藏\n    dialogFormH () {\n      this.dialogFormVisible = false\n    },\n    // 获取省\n    getCityData: function () {\n      this.citySelect.province = provinces()\n    },\n    // 选省获取到市\n    handleProvince: function (e) {\n      this.citySelect.cityDate = citys(e)\n      this.formBase.city = this.citySelect.cityDate[0]\n    },\n    // 表单提交\n    createData () {\n      this.$refs.dataForm.validate(async valid => {\n        if (valid) {\n          this.dialogFormH()\n          const data = {\n            ...this.formBase\n          }\n          if (this.formBase.id) {\n            await update(data).then(() => {\n              this.$emit('newDataes', this.formBase)\n            })\n          } else {\n            await add(this.formBase).then(() => {\n              this.$emit('newDataes', this.formBase)\n            })\n          }\n        } else {\n          this.$message.error('*号为必填项!')\n        }\n      })\n    }\n  }\n}\n</script>\n<style>\n.el-form--label-left .el-form-item__label {\n  text-align: right;\n}\n.el-form-item--medium {\n  margin-bottom: 22px;\n}\n.el-dialog__footer {\n  text-align: center;\n}\n</style>\n"]}]}