{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/articles.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/articles.vue","mtime":1668478605267},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/thread-loader/dist/cjs.js","mtime":1666491532143},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGxpc3QsIHJlbW92ZSwgY2hhbmdlU3RhdGUgfSBmcm9tICdAL2FwaS9obW1tL2FydGljbGVzJwovLyBpbXBvcnQgRW51bSBmcm9tICdAL2FwaS9obW1tL2NvbnN0YW50cycKaW1wb3J0IEFydGljbGVzQWRkIGZyb20gJ0AvbW9kdWxlLWhtbW0vY29tcG9uZW50cy9hcnRpY2xlcy1hZGQnCmltcG9ydCBBcnRpY2xlc1ByZXZpZXcgZnJvbSAnQC8vbW9kdWxlLWhtbW0vY29tcG9uZW50cy9hcnRpY2xlcy1wcmV2aWV3JwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBcnRpY2xlc0FkZCwKICAgIEFydGljbGVzUHJldmlldwogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtSW5saW5lOiB7CiAgICAgICAga2V5d29yZDogJycsCiAgICAgICAgc3RhdGU6IG51bGwsCiAgICAgICAgcGFnZXNpemU6IDEwLAogICAgICAgIHBhZ2U6IDEKICAgICAgfSwKICAgICAgcGFnZTogMSwKICAgICAgcGFnZXNpemU6IDEwLAogICAgICBsaXN0czogW10sCiAgICAgIGNvdW50czogMCwKICAgICAgc2hvd0RpYWxvZzogZmFsc2UsCiAgICAgIHRpdGxlOiAn5paw5aKe5oqA5benJywKICAgICAgZGF0YToge30sCiAgICAgIHNob3dBcnRpY2xlOiBmYWxzZSwKICAgICAgdmlkZW9EaWFsb2c6IGZhbHNlLAogICAgICBpbnB1dDogJycsIC8vIGlucHV05qGGCiAgICAgIHZpZGVvU3JjOiAnJwogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmdldExpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5paH56ug5YiX6KGoCiAgICBhc3luYyBnZXRMaXN0ICgpIHsKICAgICAgY29uc3QgeyBkYXRhOiB7IGl0ZW1zLCBjb3VudHMgfSB9ID0gYXdhaXQgbGlzdCh7IHBhZ2U6IHRoaXMucGFnZSwgcGFnZXNpemU6IHRoaXMucGFnZXNpemUgfSkKICAgICAgLy8gY29uc3QgcmVzID0gYXdhaXQgbGlzdCgpCiAgICAgIC8vIGNvbnNvbGUubG9nKHJlcykKICAgICAgdGhpcy5saXN0cyA9IGl0ZW1zCiAgICAgIHRoaXMuY291bnRzID0gY291bnRzCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZSAodmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKDExMSkKICAgICAgdGhpcy5wYWdlc2l6ZSA9IHZhbAogICAgICB0aGlzLnBhZ2UgPSAxCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSAodmFsKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKDExMSkKICAgICAgdGhpcy5wYWdlID0gdmFsCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgaW5kZXhNZW50IChpbmRleCkgewogICAgICByZXR1cm4gaW5kZXggKyAxICsgKHRoaXMucGFnZSAtIDEpICogdGhpcy5wYWdlc2l6ZQogICAgfSwKICAgIC8vIOa4hemZpOaMiemSrgogICAgY2xlYW5DbGljayAoKSB7CiAgICAgIHRoaXMuZm9ybUlubGluZS51c2VyID0gJycKICAgICAgdGhpcy5mb3JtSW5saW5lLnJlZ2lvbiA9ICcnCiAgICB9LAogICAgLy8g54q25oCBCiAgICAvLyBmb3JtYXR0ZXJNZXRob2QgKHsgc3RhdGUgfSwgY29sdW1uLCBjZWxsVmFsdWUpIHsKICAgIC8vICAgLy8gY29uc29sZS5sb2coc3RhdGUpCiAgICAvLyAgIHJldHVybiBzdGF0ZSA9PT0gMSA/ICflt7LlkK/nlKgnIDogJ+W3suemgeeUqCcKICAgIC8vICAgLy8g5bi46YeP5paH5Lu255qE5pa55byP5o6n5Yi2CiAgICAvLyAgIC8vIGNvbnN0IG9iaiA9IEVudW0uc3RhdHVzLmZpbmQoaXRlbSA9PiBpdGVtLmlkID09PSArc3RhdGUpCiAgICAvLyAgIC8vIGNvbnNvbGUubG9nKG9iaikKICAgIC8vICAgLy8gLy8gcmV0dXJuIG9iai52YWx1ZQogICAgLy8gICAvLyByZXR1cm4gb2JqID8gb2JqLnZhbHVlIDogJ+acquefpScKICAgIC8vIH0sCiAgICAvLyDliKDpmaTlkZjlt6UKICAgIGRlbCAocm93KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruWumuimgeWIoOmZpOivpeaWh+eroOWQlz8nLCAn5rip6aao5o+Q56S6JykudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVtb3ZlKHJvdykKICAgICAgICBjb25zb2xlLmxvZyhyZXMpCiAgICAgICAgaWYgKHRoaXMubGlzdHMubGVuZ3RoID09PSAxICYmIHRoaXMucGFnZSA+IDEpIHsKICAgICAgICAgIHRoaXMucGFnZS0tCiAgICAgICAgfQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKICAgICAgICB0aGlzLmdldExpc3QoKQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ+WPlua2iCcpCiAgICAgIH0pCiAgICB9LAogICAgLy8g5aSE55CG5pel5pyfCiAgICBmb3JtYXRUaW1lICAodGltZSwgc3RyKSB7CiAgICAgIHJldHVybiBkYXlqcyh0aW1lKS5mb3JtYXQoc3RyKQogICAgfSwKICAgIC8vIOWQr+eUqOemgeeUqOWIh+aNogogICAgYXN5bmMgY2hhbmdlQnRuICh2YWwpIHsKICAgICAgYXdhaXQgY2hhbmdlU3RhdGUoewogICAgICAgIGlkOiB2YWwuaWQsCiAgICAgICAgc3RhdGU6IHZhbC5zdGF0ZSA9PT0gMSA/IDAgOiAxCiAgICAgIH0pCiAgICAgIC8vIGNvbnNvbGUubG9nKHZhbC5pZCwgdmFsLnN0YXRlKQogICAgICAvLyBjb25zb2xlLmxvZyhyZXMsIDg4ODg4ODgpCiAgICAgIC8vIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5YiH5o2i5oiQ5YqfJykKICAgICAgdmFsLnN0YXRlID0gdmFsLnN0YXRlID09PSAxID8gMCA6IDEKICAgIH0sCiAgICAvLyDlop7liqAv5L+u5pS5CiAgICBzaG93RWRpdCAodHlwZSwgcm93KSB7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IHRydWUKICAgICAgLy8gY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBkZXRhaWwoeyBpZDogcm93LmlkIH0pCiAgICAgIHRoaXMuZGF0YSA9IHsgLi4ucm93LCB0eXBlOiB0eXBlIH0KICAgIH0sCiAgICBvcGVuVmlkZW8gKHVybCkgewogICAgICB0aGlzLnZpZGVvU3JjID0gdXJsCiAgICAgIHRoaXMudmlkZW9EaWFsb2cgPSB0cnVlCiAgICB9LAogICAgLy8g6aKE6KeICiAgICBwcmV2aWV3QXJ0aWNsZSAocm93KSB7CiAgICAgIHRoaXMuc2hvd0FydGljbGUgPSB0cnVlCiAgICAgIHRoaXMuZGF0YSA9IHsgLi4ucm93IH0KICAgICAgY29uc29sZS5sb2cocm93KQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5hcnRpY2xlc1ByZXZpZXcub3BlbigpCiAgICAgIH0pCiAgICAgIC8vIGNvbnNvbGUubG9nKHJvdykKICAgIH0sCiAgICBhc3luYyBoYW5kbGVGaWx0ZXIgKCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmlucHV0KQogICAgICBjb25zdCB7IGRhdGE6IHsgaXRlbXMsIGNvdW50cyB9IH0gPSBhd2FpdCBsaXN0KHRoaXMuZm9ybUlubGluZSkKICAgICAgdGhpcy5saXN0cyA9IGl0ZW1zCiAgICAgIHRoaXMuY291bnRzID0gY291bnRzCiAgICAgIGNvbnNvbGUubG9nKHsgaXRlbXMsIGNvdW50cyB9KQogICAgfQogIH0KfQoK"},{"version":3,"sources":["articles.vue"],"names":[],"mappings":";AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"articles.vue","sourceRoot":"src/module-hmmm/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <!-- 关键词 状态 新增技巧 -->\n        <el-form :inline=\"true\" :model=\"formInline\" class=\"demo-form-inline\">\n          <el-form-item label=\"关键词\">\n            <el-input v-model=\"formInline.keyword\" placeholder=\"根据文章表搜索\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"状态\">\n            <el-select v-model=\"formInline.state\" placeholder=\"请选择\">\n              <el-option label=\"启用\" value=\"1\"></el-option>\n              <el-option label=\"禁用\" value=\"0\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button  @click=\"cleanClick\">清除</el-button>\n            <el-button type=\"primary\" @click=\"handleFilter\">查询</el-button>\n          </el-form-item>\n          <el-button style=\"margin-left: 10px\" class=\"filter-item fr\" type=\"success\" @click=\"showEdit('add')\">新增技巧</el-button>\n        </el-form>\n      <!-- 数据记录 -->\n        <el-alert\n         :title=\"`数据一共 ${counts} 条`\"\n         type=\"info\"\n         :closable=\"false\"\n         show-icon>\n       </el-alert>\n       <!-- 数据列表  highlight-current-row=\"true\" -->\n        <el-table :data=\"lists\" style=\"margin-top: 20px\" >\n          <el-table-column label=\"序号\"\n            type=\"index\"\n            :index=\"indexMent\"\n            sortable=\"\"\n            width=\"80\"/>\n          <el-table-column\n          label=\"文章标题\"\n          prop=\"title\"\n          >\n          <template #default=\"{row}\">\n            {{row.title}}\n            <a @click.prevent=\"openVideo(row.videoURL)\" v-if=\"row.videoURL\" href=\"#\" class=\"el-icon-film\" style=\"color:blue\"></a>\n          </template>\n          </el-table-column>\n          <el-table-column label=\"阅读数\"  prop=\"visits\"/>\n          <el-table-column label=\"录入人\"  prop=\"username\"/>\n          <el-table-column label=\"录入时间\"  prop=\"createTime\">\n             <template #default=\"{row}\">\n              {{ formatTime(row.timeOfEntry,'YYYY-MM-DD') }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"状态\"  prop=\"state\" >\n            <template #default=\"{row}\">\n              {{row.state === 1 ? '已启用' : '已禁用'}}\n            </template>\n          </el-table-column>\n          <!-- 操作 -->\n          <el-table-column label=\"操作\" prop=\"\" fixed=\"right\" width=\"280\">\n            <template #default=\"{row}\">\n              <el-button\n              type=\"text\"\n              size=\"small\"\n              @click=\"previewArticle(row)\"\n              >预览</el-button>\n              <el-button type=\"text\" size=\"small\" @click=\"changeBtn(row)\">\n                {{row.state === 0?\"启用\":\"禁用\"}}\n                </el-button>\n              <el-button type=\"text\" size=\"small\" :disabled=\"row.state===1\"\n              @click=\"showEdit('edit',row)\" >修改</el-button>\n              <el-button type=\"text\" size=\"small\" :disabled=\"row.state===1\" @click=\"del(row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <!-- 新增技巧 ref=\"ArticlesAddRefs\" -->\n        <ArticlesAdd\n        :show-dialog.sync=\"showDialog\"\n        @reload=\"getList\"\n        :particulars=\"data\"></ArticlesAdd>\n        <!-- 预览 -->\n        <ArticlesPreview\n        ref=\"articlesPreview\"\n        :show-article.sync=\"showArticle\"\n        :article=\"data\"\n        ></ArticlesPreview>\n      </el-card>\n    <!-- 分页器 -->\n    <el-pagination\n      style=\"float:right;padding:10px\"\n      @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\"\n      :current-page=\"page\"\n      :page-sizes=\"[5, 10, 20, 50]\"\n      :page-size=\"pagesize\"\n      layout=\" prev, pager, next,sizes,jumper\"\n      background\n      :total=\"counts\">\n    </el-pagination>\n    <!-- 视频弹窗 -->\n    <el-dialog\n      :visible=\"videoDialog\"\n      width=\"50%\"\n      @close='videoDialog=false'\n      >\n      <video :src=\"videoSrc\" controls=\"controls\" autoplay width=\"100%\" height=\"100%\">\n      </video>\n    </el-dialog>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { list, remove, changeState } from '@/api/hmmm/articles'\n// import Enum from '@/api/hmmm/constants'\nimport ArticlesAdd from '@/module-hmmm/components/articles-add'\nimport ArticlesPreview from '@//module-hmmm/components/articles-preview'\nimport dayjs from 'dayjs'\nexport default {\n  components: {\n    ArticlesAdd,\n    ArticlesPreview\n  },\n  data () {\n    return {\n      formInline: {\n        keyword: '',\n        state: null,\n        pagesize: 10,\n        page: 1\n      },\n      page: 1,\n      pagesize: 10,\n      lists: [],\n      counts: 0,\n      showDialog: false,\n      title: '新增技巧',\n      data: {},\n      showArticle: false,\n      videoDialog: false,\n      input: '', // input框\n      videoSrc: ''\n    }\n  },\n  created () {\n    this.getList()\n  },\n  methods: {\n    // 获取文章列表\n    async getList () {\n      const { data: { items, counts } } = await list({ page: this.page, pagesize: this.pagesize })\n      // const res = await list()\n      // console.log(res)\n      this.lists = items\n      this.counts = counts\n    },\n    handleSizeChange (val) {\n      // console.log(111)\n      this.pagesize = val\n      this.page = 1\n      this.getList()\n    },\n    handleCurrentChange (val) {\n      // console.log(111)\n      this.page = val\n      this.getList()\n    },\n    indexMent (index) {\n      return index + 1 + (this.page - 1) * this.pagesize\n    },\n    // 清除按钮\n    cleanClick () {\n      this.formInline.user = ''\n      this.formInline.region = ''\n    },\n    // 状态\n    // formatterMethod ({ state }, column, cellValue) {\n    //   // console.log(state)\n    //   return state === 1 ? '已启用' : '已禁用'\n    //   // 常量文件的方式控制\n    //   // const obj = Enum.status.find(item => item.id === +state)\n    //   // console.log(obj)\n    //   // // return obj.value\n    //   // return obj ? obj.value : '未知'\n    // },\n    // 删除员工\n    del (row) {\n      this.$confirm('确定要删除该文章吗?', '温馨提示').then(async () => {\n        const res = await remove(row)\n        console.log(res)\n        if (this.lists.length === 1 && this.page > 1) {\n          this.page--\n        }\n        this.$message.success('删除成功')\n        this.getList()\n      }).catch(() => {\n        console.log('取消')\n      })\n    },\n    // 处理日期\n    formatTime  (time, str) {\n      return dayjs(time).format(str)\n    },\n    // 启用禁用切换\n    async changeBtn (val) {\n      await changeState({\n        id: val.id,\n        state: val.state === 1 ? 0 : 1\n      })\n      // console.log(val.id, val.state)\n      // console.log(res, 8888888)\n      // this.$message.success('切换成功')\n      val.state = val.state === 1 ? 0 : 1\n    },\n    // 增加/修改\n    showEdit (type, row) {\n      this.showDialog = true\n      // const { data } = await detail({ id: row.id })\n      this.data = { ...row, type: type }\n    },\n    openVideo (url) {\n      this.videoSrc = url\n      this.videoDialog = true\n    },\n    // 预览\n    previewArticle (row) {\n      this.showArticle = true\n      this.data = { ...row }\n      console.log(row)\n      this.$nextTick(() => {\n        this.$refs.articlesPreview.open()\n      })\n      // console.log(row)\n    },\n    async handleFilter () {\n      // console.log(this.input)\n      const { data: { items, counts } } = await list(this.formInline)\n      this.lists = items\n      this.counts = counts\n      console.log({ items, counts })\n    }\n  }\n}\n\n</script>\n\n<style lang='scss' scoped>\n</style>\n"]}]}