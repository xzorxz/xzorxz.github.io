{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/tags.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/tags.vue","mtime":1668475987754},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGxpc3QsIGNoYW5nZVN0YXRlLCByZW1vdmUgfSBmcm9tICdAL2FwaS9obW1tL3RhZ3MuanMnCmltcG9ydCBUYWdzQWRkIGZyb20gJy4uL2NvbXBvbmVudHMvdGFncy1hZGQudnVlJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFRhZ3NBZGQKICB9LAoKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlcVBhcmFtczogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgcGFnZXNpemU6IDEwLAogICAgICAgIHRhZ05hbWU6IG51bGwsCiAgICAgICAgc3RhdHVzOiBudWxsLAogICAgICAgIGVkaXRJZDogMCwKICAgICAgICBzdWJqZWN0TmFtZTogbnVsbAogICAgICB9LAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICAvLyB0b3RhbDogbnVsbCwKICAgICAgdG90YWw6IDAsCiAgICAgIC8vIHBhZ2VTaXplczogWzIwLCA1MCwgODAsIDEyMF0sCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBzaG93RGlhbG9nOiBmYWxzZSwKICAgICAgZm9ybUlkOiBudWxsLAogICAgICBmb3JtRGF0YTogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGRpcmVjdG9yeU5hbWU6IG51bGwsCiAgICAgICAgc3ViamVjdElEOiBudWxsCiAgICAgIH0KCiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0VGFibGVEYXRhKCkKICAgIC8vIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS5pZCkgewogICAgLy8gICB0aGlzLnJlcVBhcmFtcy5lZGl0SWQgPSB0aGlzLiRyb3V0ZS5xdWVyeS5pZAogICAgLy8gICB0aGlzLnJlcVBhcmFtcy5zdWJqZWN0TmFtZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lm5hbWUKICAgIC8vICAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBsaXN0KHRoaXMucmVxUGFyYW1zKQogICAgLy8gICBjb25zb2xlLmxvZyhkYXRhKQogICAgLy8gfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5riF6ZmkCiAgICBjbGVhciAoKSB7CiAgICAgIHRoaXMucmVxUGFyYW1zID0gewogICAgICAgIHRhZ3NOYW1lOiBudWxsLAogICAgICAgIHN0YXRlOiBudWxsLAogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgcGFnZXNpemU6IDEwCiAgICAgIH0KICAgIH0sCiAgICAvLyDmkJzntKLlrabnp5EKICAgIGZpbHRlciAoKSB7CiAgICAgIHRoaXMucmVxUGFyYW1zLnBhZ2UgPSAxCiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCkKICAgIH0sCgogICAgLy8g5oyJ6ZKu54K55Ye75LqL5Lu25pa55rOVCiAgICBhc3luYyBzdGFydFJvdyAodGFnKSB7CiAgICAgIC8vIHJvd3Muc3BsaWNlKGluZGV4LCAxKQogICAgICBjb25zb2xlLmxvZygn5ZCv55So5LqGJykKICAgICAgYXdhaXQgY2hhbmdlU3RhdGUoewogICAgICAgIGlkOiB0YWcuaWQsCiAgICAgICAgc3RhdGU6IHRhZy5zdGF0ZSA9PT0gMSA/IDAgOiAxCiAgICAgIH0pCiAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5pON5L2c5oiQ5YqfJykKICAgICAgdGFnLnN0YXRlID0gdGFnLnN0YXRlID09PSAxID8gMCA6IDEKICAgIH0sCiAgICBlZGl0Um93ICgpIHsKICAgICAgLy8gcm93cy5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIGNvbnNvbGUubG9nKCflj6/ku6Xkv67mlLnkuoYnKQogICAgfSwKCiAgICBkZWxldGVSb3cgKGlkKSB7CiAgICAgIC8vIHJvd3Muc3BsaWNlKGluZGV4LCAxKQogICAgICBjb25zb2xlLmxvZygn5Yig6ZmkJykKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH5Lu2LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIGF3YWl0IHJlbW92ZSh7IGlkIH0pCiAgICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfSkKCiAgICAgIHRoaXMuZ2V0VGFibGVEYXRhKCkKICAgIH0sCgogICAgLyog5paw5aKe5qCH562+ICovCiAgICBoYW5kbGVTaG93ICgpIHsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZQogICAgICB0aGlzLiRyZWZzLmFkZEZvcm0udGl0bGUgPSAn5paw5aKe5qCH562+JwogICAgICAvLyBjb25zb2xlLmxvZygxMTEpCiAgICB9LAogICAgLy8g5L+u5pS5CiAgICBoYW5kbGVTaG93dHdvIChyb3cpIHsKICAgICAgdGhpcy5zaG93RGlhbG9nID0gdHJ1ZQogICAgICB0aGlzLmZvcm1JZCA9IHJvdy5pZAogICAgICB0aGlzLiRyZWZzLmFkZEZvcm0udGl0bGUgPSAn5L+u5pS55qCH562+JwogICAgICB0aGlzLiRyZWZzLmFkZEZvcm0uZm9ybURhdGEuc3ViamVjdElEID0gcm93LnN1YmplY3RJRAogICAgICB0aGlzLiRyZWZzLmFkZEZvcm0uZm9ybURhdGEudGFnTmFtZSA9IHJvdy50YWdOYW1lCiAgICAgIC8vIGNvbnNvbGUubG9nKDExMSkKICAgIH0sCiAgICAvLyDph43mlrDmuLLmn5PpobXpnaIKICAgIHVwZGF0ZUxpc3QgKCkgewogICAgICB0aGlzLnJlcVBhcmFtcy5wYWdlID0gMQogICAgICB0aGlzLmdldFRhYmxlRGF0YSgpCiAgICB9LAogICAgLyog5YiG6aG15ZmoICovCgogICAgLy8g6I635Y+W5qCH562+5YiX6KGoCiAgICBhc3luYyBnZXRUYWJsZURhdGEgKCkgewogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuaWQpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnN1YmplY3RJRCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkCiAgICAgICAgdGhpcy5mb3JtRGF0YS5zdWJqZWN0TmFtZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lm5hbWUKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGxpc3QodGhpcy5mb3JtRGF0YSkKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5pdGVtcwogICAgICAgIHRoaXMudG90YWwgPSBkYXRhLmNvdW50cwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgbGlzdCh0aGlzLnJlcVBhcmFtcykKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgICAgIC8vIOa4suafk+mhtemdouaVsOaNrgogICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5pdGVtcwogICAgICAgIHRoaXMudG90YWwgPSBkYXRhLmNvdW50cwogICAgICB9CiAgICB9LAogICAgLy8gc2l6ZeWPkemAgeWPmOWMluinpuWPkeeahOaWueazlQogICAgaGFuZGxlU2l6ZUNoYW5nZSAodmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKHZhbCkKICAgICAgdGhpcy5yZXFQYXJhbXMucGFnZSA9IDEKICAgICAgdGhpcy5yZXFQYXJhbXMucGFnZXNpemUgPSB2YWwKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQogICAgfSwKICAgIC8vIOmhteeggeWPkeeUn+WPmOWMluinpuWPkeeahOaWueazlQogICAgaGFuZGxlQ3VycmVudENoYW5nZSAodmFsKSB7CiAgICAgIHRoaXMucmVxUGFyYW1zLnBhZ2UgPSB2YWwKICAgICAgdGhpcy5nZXRUYWJsZURhdGEoKQogICAgfQogIH0KfQo="},{"version":3,"sources":["tags.vue"],"names":[],"mappings":";AAiIA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tags.vue","sourceRoot":"src/module-hmmm/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <!-- 面包屑 -->\n        <el-breadcrumb\n          separator-class=\"el-icon-arrow-right\"\n          class=\"crumbHeader\"\n        >\n          <el-breadcrumb-item>首页</el-breadcrumb-item>\n          <el-breadcrumb-item>活动列表</el-breadcrumb-item>\n        </el-breadcrumb>\n\n        <!-- 输入框 -->\n        <el-form :inline=\"true\" class=\"demo-form-inline\" >\n          <el-form-item label=\"标签名称\" style=\"margin-right: 40px\">\n            <el-input v-model=\"reqParams.tagName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"状态\">\n            <el-select v-model=\"reqParams.status\" placeholder=\"请选择\">\n              <el-option label=\"启用\" :value=\"1\"></el-option>\n              <el-option label=\"禁用\" :value=\"0\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"clear()\">清除</el-button>\n            <el-button type=\"primary\" @click=\"filter()\">搜索</el-button>\n          </el-form-item>\n\n          <!-- 右侧新增标签 -->\n          <el-button\n            type=\"success\"\n            icon=\"el-icon-edit\"\n            style=\"float: right\"\n            v-if=\"$route.query.id\"\n            @click=\"$router.back()\"\n            >返回学科</el-button\n          >\n          <el-button\n            type=\"success\"\n            icon=\"el-icon-edit\"\n            style=\"float: right\"\n            @click=\"handleShow\"\n            >新增标签</el-button\n          >\n        </el-form>\n\n        <!-- alert警告 -->\n        <!-- es6语法 -->\n        <el-alert\n          :title=\"`数据一共${total}条`\"\n          type=\"info\"\n          show-icon\n          :closable=\"false\"\n          style=\"margin-bottom: 15px\"\n        ></el-alert>\n\n        <!-- 表格 -->\n        <el-table :data=\"tableData\" style=\"width: 100%; margin-bottom: 15px;padding-left:20px\" ref=\"formDate\">\n          <el-table-column type=\"index\" label=\"序号\" width=\"150\">\n          </el-table-column>\n          <el-table-column prop=\"subjectName\" label=\"所属学科\" >\n          </el-table-column>\n          <el-table-column prop=\"tagName\" label=\"标签名称\" >\n          </el-table-column>\n          <el-table-column prop=\"username\" label=\"创建者\" >\n          </el-table-column>\n          <el-table-column prop=\"addDate\" label=\"创建日期\" >\n            <template slot-scope=\"scope\">\n              {{ scope.row.addDate | parseTimeByString }}\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"state\" label=\"状态\" >\n            <template #default=\"{ row }\">\n              {{ row.state === 1 ? \"已启用\" : \"已禁用\" }}\n            </template>\n          </el-table-column>\n          <el-table-column fixed=\"right\" label=\"操作\" width=\"150\">\n            <template #default=\"{ row }\">\n              <!-- 三个小按钮 -->\n              <el-button @click=\"startRow(row)\" type=\"text\" size=\"small\">\n                {{ row.state === 1 ? \"禁用\" : \"启用\" }}\n              </el-button>\n              <el-button\n                @click=\"handleShowtwo(row)\"\n                type=\"text\"\n                size=\"small\"\n                :disabled=\"row.state === 1\"\n              >\n                修改\n              </el-button>\n              <el-button\n                @click=\"deleteRow(row.id)\"\n                type=\"text\"\n                size=\"small\"\n                :disabled=\"row.state === 1\"\n              >\n                删除\n              </el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <!-- 分页 -->\n        <!-- page-sizes 每页显示条目个数  total 总条目数\n           -->\n        <div class=\"pages\">\n          <el-pagination\n            background\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange \"\n            :current-page=\"currentPage\"\n            :total=\"total\"\n            :page-size=\"10\"\n            :page-sizes=\"[10, 20, 30, 50]\"\n            :pager = 1\n            layout=\"prev,pager, next, sizes,jumper\"\n            style=\"float:right;margin-bottom:20px\"\n          >\n          </el-pagination>\n        </div>\n        <!-- 弹框 -->\n      </el-card>\n      <tags-add :showDialog.sync=\"showDialog\" ref=\"addForm\" :formId=\"formId\" @getTabledata=\"getTableData\" @updateList=\"updateList\"></tags-add>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { list, changeState, remove } from '@/api/hmmm/tags.js'\nimport TagsAdd from '../components/tags-add.vue'\n\nexport default {\n  components: {\n    TagsAdd\n  },\n\n  data () {\n    return {\n      reqParams: {\n        page: 1,\n        pagesize: 10,\n        tagName: null,\n        status: null,\n        editId: 0,\n        subjectName: null\n      },\n      tableData: [],\n      // total: null,\n      total: 0,\n      // pageSizes: [20, 50, 80, 120],\n      currentPage: 1,\n      showDialog: false,\n      formId: null,\n      formData: {\n        id: null,\n        directoryName: null,\n        subjectID: null\n      }\n\n    }\n  },\n  async created () {\n    this.getTableData()\n    // if (this.$route.query.id) {\n    //   this.reqParams.editId = this.$route.query.id\n    //   this.reqParams.subjectName = this.$route.query.name\n    //   const { data } = await list(this.reqParams)\n    //   console.log(data)\n    // }\n  },\n  methods: {\n    // 清除\n    clear () {\n      this.reqParams = {\n        tagsName: null,\n        state: null,\n        page: 1,\n        pagesize: 10\n      }\n    },\n    // 搜索学科\n    filter () {\n      this.reqParams.page = 1\n      this.getTableData()\n    },\n\n    // 按钮点击事件方法\n    async startRow (tag) {\n      // rows.splice(index, 1)\n      console.log('启用了')\n      await changeState({\n        id: tag.id,\n        state: tag.state === 1 ? 0 : 1\n      })\n      this.$message.success('操作成功')\n      tag.state = tag.state === 1 ? 0 : 1\n    },\n    editRow () {\n      // rows.splice(index, 1)\n      console.log('可以修改了')\n    },\n\n    deleteRow (id) {\n      // rows.splice(index, 1)\n      console.log('删除')\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        await remove({ id })\n        this.getTableData()\n        this.$message.success('删除成功')\n      }).catch(() => {\n        this.$message.info('已取消删除')\n      })\n\n      this.getTableData()\n    },\n\n    /* 新增标签 */\n    handleShow () {\n      this.showDialog = true\n      this.$refs.addForm.title = '新增标签'\n      // console.log(111)\n    },\n    // 修改\n    handleShowtwo (row) {\n      this.showDialog = true\n      this.formId = row.id\n      this.$refs.addForm.title = '修改标签'\n      this.$refs.addForm.formData.subjectID = row.subjectID\n      this.$refs.addForm.formData.tagName = row.tagName\n      // console.log(111)\n    },\n    // 重新渲染页面\n    updateList () {\n      this.reqParams.page = 1\n      this.getTableData()\n    },\n    /* 分页器 */\n\n    // 获取标签列表\n    async getTableData () {\n      if (this.$route.query.id) {\n        this.formData.subjectID = this.$route.query.id\n        this.formData.subjectName = this.$route.query.name\n        const { data } = await list(this.formData)\n        console.log(data)\n        this.tableData = data.items\n        this.total = data.counts\n      } else {\n        const { data } = await list(this.reqParams)\n        console.log(data)\n        // 渲染页面数据\n        this.tableData = data.items\n        this.total = data.counts\n      }\n    },\n    // size发送变化触发的方法\n    handleSizeChange (val) {\n      console.log(val)\n      this.reqParams.page = 1\n      this.reqParams.pagesize = val\n      this.getTableData()\n    },\n    // 页码发生变化触发的方法\n    handleCurrentChange (val) {\n      this.reqParams.page = val\n      this.getTableData()\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.crumbHeader {\n  margin-bottom: 30px;\n}\n</style>\n"]}]}