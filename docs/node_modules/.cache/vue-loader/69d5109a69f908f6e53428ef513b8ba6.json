{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/companys/citys.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/companys/citys.vue","mtime":1668407086275},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IHByb3ZpbmNlcyBhcyBnZXRQcm92aW5jZXMsIGNpdHlzIGFzIGdldENpdHlzIH0gZnJvbSAnQC9hcGkvaG1tbS9jaXR5cy5qcycKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjaXR5cycsCiAgcHJvcHM6IFsndmFsdWUnXSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHByb3ZBbmRDaXR5OiB7CiAgICAgICAgcHJvdmluY2U6IHRoaXMudmFsdWUucHJvdmluY2UsCiAgICAgICAgY2l0eTogdGhpcy52YWx1ZS5jaXR5CiAgICAgIH0sCiAgICAgIHByb3ZpbmNlTGlzdDogW10sCiAgICAgIGNpdHlMaXN0OiBbXQogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmdldENpdHlEYXRhKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiOt+WPluecgQogICAgZ2V0Q2l0eURhdGE6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5wcm92aW5jZUxpc3QgPSBnZXRQcm92aW5jZXMoKQogICAgICBpZiAodGhpcy5wcm92QW5kQ2l0eS5wcm92aW5jZSkgewogICAgICAgIHRoaXMuY2l0eUxpc3QgPSBnZXRDaXR5cyh0aGlzLnByb3ZBbmRDaXR5LnByb3ZpbmNlKQogICAgICB9CiAgICB9LAogICAgLy8g6YCJ55yB6I635Y+W5Yiw5biCCiAgICBoYW5kbGVDaXR5OiBmdW5jdGlvbiAoZSkgewogICAgICB0aGlzLmNpdHlMaXN0ID0gZ2V0Q2l0eXMoZSkKICAgICAgLy8gdGhpcy52YWx1ZS5jaXR5ID0gdGhpcy5jaXR5TGlzdFswXQogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHsKICAgICAgICBwcm92aW5jZTogdGhpcy5wcm92QW5kQ2l0eS5wcm92aW5jZSwKICAgICAgICBjaXR5OiBlCiAgICAgIH0pCiAgICB9LAogICAgLy8g6YCJ55yB6I635Y+W5Yiw5biCCiAgICBoYW5kbGVQcm92aW5jZTogZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5jaXR5TGlzdCA9IGdldENpdHlzKGUpCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgewogICAgICAgIHByb3ZpbmNlOiB0aGlzLnByb3ZBbmRDaXR5LnByb3ZpbmNlLAogICAgICAgIGNpdHk6IHRoaXMuY2l0eUxpc3RbMF0KICAgICAgfSkKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAvLyDnlLHkuo7niLbnu4Tku7bkuK3kvKDlhaXnmoR2LW1vZGVsPSJYWFhYIizov5nph4znmoR4eHh45piv6YCa6L+HYWpheOWPluWbnuadpeeahOaVsOaNrgogICAgLy8g5omA5Lul77yM5Zyo5Lyg5YC855qE6L+H56iL5Lit5piv5pyJ5LiA5Liq5Y+Y5YyW77yaCiAgICAvLyAxLiDliJ3lp4vlgLzmmK8iIgogICAgLy8gMi4gYWpheOWbnuadpeS5i+WQju+8jOWPluWIsOS6hu+8jOiHquWKqOS8oOWFpeWtkOe7hOS7tu+8iHYtbW9kZWzmmK/lk43lupTlvI/vvIkKICAgIC8vIOaJgOS7pe+8jOimgeeUqHdhdGNo55uR5ZCs6L+Z5Liq5Y+Y5YyWCiAgICAvLyDmoLzlvI/mmK/vvJoKICAgIC8vIOWtl+espuaute+8miB7CiAgICAvLyAgIGhhbmRsZXI6KG5ld1ZhbCwgb2xkVmFsKSB7CgogICAgLy8gICB9LAogICAgLy8gICBkZWVwOiB0cnVlCiAgICAvLyB9CiAgICB2YWx1ZTogewogICAgICBoYW5kbGVyIChuZXdWYWwsIG9sZFZhbCkgewogICAgICAgIC8vIOabtOaWsOecgeS7vQogICAgICAgIHRoaXMucHJvdkFuZENpdHkucHJvdmluY2UgPSBuZXdWYWwucHJvdmluY2UKICAgICAgICAvLyDojrflj5blr7nlupTluILnuqfnmoTmlbDmja4KICAgICAgICB0aGlzLmNpdHlMaXN0ID0gZ2V0Q2l0eXMobmV3VmFsLnByb3ZpbmNlKQogICAgICAgIC8vIOabtOaWsOW4ggogICAgICAgIHRoaXMucHJvdkFuZENpdHkuY2l0eSA9IG5ld1ZhbC5jaXR5CiAgICAgIH0sCiAgICAgIGRlZXA6IHRydWUKICAgIH0KICB9Cn0K"},{"version":3,"sources":["citys.vue"],"names":[],"mappings":";AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"citys.vue","sourceRoot":"src/module-hmmm/pages/companys","sourcesContent":["<template>\n  <div style=\"display: flex;align-items: baseline;\">\n    <el-select\n      class=\"filter-item\"\n      style=\"width: 100px;\"\n      v-model=\"provAndCity.province\"\n      @change=\"handleProvince\"\n      clearable\n    >\n      <el-option v-for=\"item in provinceList\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\n    </el-select><label style=\"margin:0 10px; font-weight:normal\">市</label>\n    <el-select\n      class=\"filter-item\"\n      style=\"width: 100px;\"\n      v-model=\"provAndCity.city\"\n      @change=\"handleCity\"\n      clearable\n    >\n      <el-option v-for=\"item in cityList\" :key=\"item\" :label=\"item\" :value=\"item\"></el-option>\n    </el-select>\n  </div>\n</template>\n\n<script>\nimport { provinces as getProvinces, citys as getCitys } from '@/api/hmmm/citys.js'\nexport default {\n  name: 'citys',\n  props: ['value'],\n  data () {\n    return {\n      provAndCity: {\n        province: this.value.province,\n        city: this.value.city\n      },\n      provinceList: [],\n      cityList: []\n    }\n  },\n  created () {\n    this.getCityData()\n  },\n  methods: {\n    // 获取省\n    getCityData: function () {\n      this.provinceList = getProvinces()\n      if (this.provAndCity.province) {\n        this.cityList = getCitys(this.provAndCity.province)\n      }\n    },\n    // 选省获取到市\n    handleCity: function (e) {\n      this.cityList = getCitys(e)\n      // this.value.city = this.cityList[0]\n      this.$emit('input', {\n        province: this.provAndCity.province,\n        city: e\n      })\n    },\n    // 选省获取到市\n    handleProvince: function (e) {\n      this.cityList = getCitys(e)\n      this.$emit('input', {\n        province: this.provAndCity.province,\n        city: this.cityList[0]\n      })\n    }\n  },\n  watch: {\n    // 由于父组件中传入的v-model=\"XXXX\",这里的xxxx是通过ajax取回来的数据\n    // 所以，在传值的过程中是有一个变化：\n    // 1. 初始值是\"\"\n    // 2. ajax回来之后，取到了，自动传入子组件（v-model是响应式）\n    // 所以，要用watch监听这个变化\n    // 格式是：\n    // 字符段： {\n    //   handler:(newVal, oldVal) {\n\n    //   },\n    //   deep: true\n    // }\n    value: {\n      handler (newVal, oldVal) {\n        // 更新省份\n        this.provAndCity.province = newVal.province\n        // 获取对应市级的数据\n        this.cityList = getCitys(newVal.province)\n        // 更新市\n        this.provAndCity.city = newVal.city\n      },\n      deep: true\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n"]}]}