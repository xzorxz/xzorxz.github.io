{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/directorys.vue?vue&type=style&index=0&id=60dec6f3&lang=scss&scoped=true&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/directorys.vue","mtime":1668475987749},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/css-loader/dist/cjs.js","mtime":1666491586395},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1666491603796},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/postcss-loader/src/index.js","mtime":1666491592715},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/sass-loader/dist/cjs.js","mtime":1666491618412},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lbC10YWJsZSAuZWwtdGFibGVfX2NlbGx7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Cg=="},{"version":3,"sources":["directorys.vue"],"names":[],"mappings":";AAmSA;AACA;AACA","file":"directorys.vue","sourceRoot":"src/module-hmmm/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <!-- 面包屑 -->\n        <div style=\"border-bottom: 2px solid #f4f4f5; margin-bottom: 15px\">\n          <el-breadcrumb\n            separator-class=\"el-icon-arrow-right\"\n            style=\"margin-bottom: 15px\"\n          >\n            <el-breadcrumb-item>学科管理</el-breadcrumb-item>\n            <el-breadcrumb-item>目录管理</el-breadcrumb-item>\n          </el-breadcrumb>\n        </div>\n        <!-- end -->\n        <!-- 目录管理 -->\n        <!-- 搜索 -->\n        <el-form\n          :inline=\"true\"\n          :model=\"directorysQuery\"\n          class=\"demo-form-inline\"\n        >\n          <el-form-item label=\"目录名称\">\n            <el-input\n              v-model=\"directorysQuery.directoryName\"\n              @keyup.enter=\"onSearch\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"状态\">\n            <el-select v-model=\"directorysQuery.state\" placeholder=\"请选择\">\n              <el-option label=\"启用\" :value=\"1\"></el-option>\n              <el-option label=\"禁用\" :value=\"0\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"clear\">清除</el-button>\n            <el-button type=\"primary\" @click=\"onSearch\">搜索</el-button>\n          </el-form-item>\n          <!-- <el-form-item style=\"padding-left: 640px; color: #409EFF;\">\n            <span><i class=\"el-icon-back\"></i>返回学科</span>\n          </el-form-item> -->\n          <el-button\n            class=\"filter-item fr\"\n            style=\"margin-left: 10px\"\n            type=\"success\"\n            icon=\"el-icon-edit\"\n            @click=\"handleOpen\"\n            >新增目录</el-button\n          >\n          <!-- {{$t('table.directorysNew')}} -->\n        </el-form>\n\n        <el-alert :title=\"`数据一共${total}条`\" type=\"info\" show-icon>\n        </el-alert>\n        <!-- end -->\n\n        <!-- 数据 -->\n        <el-table :data=\"tableData\" style=\"width: 100%\">\n          <el-table-column type=\"index\" label=\"序号\">\n            <!-- <template #default=\"scope\">\n              <div>\n                {{ (page.page - 1) * page.limit + scope.$index + 1 }}\n              </div>\n            </template> -->\n          </el-table-column>\n          <el-table-column prop=\"subjectName\" label=\"所属学科\" >\n          </el-table-column>\n          <el-table-column prop=\"directoryName\" label=\"目录名称\" >\n          </el-table-column>\n          <el-table-column\n            prop=\"username\"\n            label=\"创建者\"\n            width=\"180\"\n          ></el-table-column>\n          <el-table-column prop=\"addDate\" label=\"创建日期\" >\n            <template #default=\"{ row }\">\n              {{ dayjs(row.addDate).format(\"YYYY-MM-DD hh:mm\") }}\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"totals\"\n            label=\"面试题数量\"\n            width=\"100\"\n          ></el-table-column>\n          <el-table-column prop=\"state\" label=\"状态\">\n            <template #default=\"{ row }\">\n              {{ row.state === 1 ? \"已启用\" : \"已禁用\" }}\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"\" label=\"操作\" width=\"150px\">\n            <template #default=\"{ row }\">\n              <el-link\n                :underline=\"false\"\n                type=\"primary\"\n                style=\"padding-right: 10px\"\n                @click=\"handleChange(row)\"\n              >\n                {{ row.state === 0 ? \"启用\" : \"禁用\" }}\n              </el-link>\n              <el-link\n                :underline=\"false\"\n                type=\"info\"\n                :disabled=\"row.state === 0\"\n                style=\"padding-right: 10px\"\n                @click=\"handleEdit(row)\"\n                >修改</el-link\n              >\n              <!-- {{row}} -->\n              <el-link\n                :underline=\"false\"\n                type=\"info\"\n                :disabled=\"row.state === 0\"\n                @click=\"handleDel(row)\"\n                >删除</el-link\n              >\n            </template>\n          </el-table-column>\n        </el-table>\n        <!-- end -->\n\n        <!-- 分页 -->\n\n        <el-pagination\n          style=\"margin-top: 20px; text-align: right\"\n          layout=\"prev, pager, next, sizes, jumper\"\n          :total=\"total\"\n          :page-sizes=\"[5, 10, 15, 20]\"\n          :page-size.sync=\"directorysQuery.pagesize\"\n          :current-page.sync=\"directorysQuery.page\"\n          @current-change=\"handleCurrentChange\"\n          @size-change=\"handleSizeChange\"\n        ></el-pagination>\n        <!-- end -->\n      </el-card>\n\n      <!-- 新增弹窗 -->\n      <DirectoryAdd\n      ref=\"directoryAdd\"\n      :visible=\"visible\"\n      :formData=\"formData\"\n      @closeDialog=\"visible = false\"\n      @updateList=\"updateList()\"\n      ></DirectoryAdd>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs'\nimport { list, remove, changeState } from '@/api/hmmm/directorys'\nimport DirectoryAdd from './../components/directorys-add'\n// import { list as getCompanys } from '@/api/hmmm/companys'\n// import { list as getQuestion } from '@/api/hmmm/questions'\n\nexport default {\n  name: 'Directorys',\n  components: {\n    DirectoryAdd\n  },\n  data () {\n    return {\n      directorysQuery: {\n        id: null,\n        directoryName: null,\n        state: null,\n        page: 1,\n        pagesize: 10\n      }, // 目录列表数据\n      tableData: [], // 表单渲染数据\n      total: 0, // 总条数\n      dayjs,\n      visible: false, // 弹窗\n      formData: {\n        id: null,\n        directoryName: null,\n        subjectID: null\n      }\n\n    }\n  },\n  async created () {\n    this.getDirectorysList()\n  },\n  methods: {\n    // 新增弹窗\n    handleOpen () {\n      console.log(111)\n      this.visible = true\n      this.$refs.directoryAdd.title = '新增目录'\n    },\n    // 修改弹窗\n    handleEdit (val) {\n      this.visible = true\n      this.formData = val\n      // 回显\n      // this.$refs.directoryAdd.dialogForm.id = val.id\n      this.$refs.directoryAdd.dialogForm.subjectID = val.subjectID\n      this.$refs.directoryAdd.dialogForm.directoryName = val.directoryName\n      console.log(val)\n      this.$refs.directoryAdd.title = '修改目录'\n    },\n    // 禁用/启用转换\n    async handleChange (val) {\n      await changeState({\n        id: val.id,\n        state: val.state === 1 ? 0 : 1\n      })\n      console.log(val.id, val.state)\n      this.$message.success('切换成功')\n      val.state = val.state === 1 ? 0 : 1\n    },\n    // 删除\n    handleDel (val) {\n      // console.log(1)\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(async () => {\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n          await remove(val)\n          this.getDirectorysList()\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          })\n        })\n    },\n    // 清空表单\n    clear () {\n      this.directorysQuery = {\n        directoryName: '',\n        state: '',\n        page: 1,\n        pagesize: 5\n      }\n      this.getDirectorysList()\n    },\n    // 进行查询\n    onSearch () {\n      this.directorysQuery.page = 1\n      this.getDirectorysList()\n    },\n    // 渲染列表\n    async getDirectorysList () {\n      if (this.$route.query.id) {\n        this.formData.subjectID = this.$route.query.id\n        this.formData.subjectName = this.$route.query.name\n        const { data } = await list(this.formData)\n        console.log(data)\n        this.tableData = data.items\n        this.total = data.counts\n      } else {\n        const { data } = await list(this.directorysQuery)\n        // console.log(data)\n        this.tableData = data.items\n        this.total = data.counts\n      }\n    },\n    // 分页\n    handleSizeChange (size) {\n      this.directorysQuery.page = 1\n      this.directorysQuery.pagesize = size\n      this.getDirectorysList()\n    },\n    // 切换页面\n    handleCurrentChange (page) {\n      this.directorysQuery.page = page\n      this.getDirectorysList()\n    },\n    // 更新列表\n    updateList () {\n      this.directorysQuery.page = 1\n      this.getDirectorysList()\n    }\n    // 自定义索引列\n    // indexMethod (index) {\n    //   return index + 1 + (this.page - 1) * this.size\n    // }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-table .el-table__cell{\n  text-align: center;\n}\n</style>\n"]}]}