{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/thread-loader/dist/cjs.js!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-manage/components/permissionsApi-add.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-manage/components/permissionsApi-add.vue","mtime":1668225793867},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/babel.config.js","mtime":1668225793694},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/thread-loader/dist/cjs.js","mtime":1666491532143},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9Vc2Vycy94aWFvemhhbmcvXHU1QjY2XHU0RTYwL1x1NUMzMVx1NEUxQVx1NzNFRFx1NUI2Nlx1NEU2MC92dWUtXHU1QjlFXHU2MjE4L2htbW0tZnJvbnRlbmQtZGV2L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgeyBkZXRhaWwsIHVwZGF0ZSwgYWRkIH0gZnJvbSAnQC9hcGkvYmFzZS9wZXJtaXNzaW9ucyc7CmltcG9ydCB7IGxpc3QgfSBmcm9tICdAL2FwaS9iYXNlL21lbnVzLmpzJzsKdmFyIF90aGlzID0gW107CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnUGVybWlzc2lvbkdyb3Vwc0FwaUFkZCcsCiAgcHJvcHM6IFsnYXBpVGl0bGUnLCAncnVsZUlubGluZSddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2dGb3JtVmlzaWJsZTogZmFsc2UsCiAgICAgIFBlcm1pc3Npb25Hcm91cHNtZW51OiBbXSwKICAgICAgZGVmYXVsdFByb3BzOiB7CiAgICAgICAgbGFiZWw6ICd0aXRsZScKICAgICAgfSwKICAgICAgZm9ybUJhc2U6IHsKICAgICAgICBpZDogMCwKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgYXBpczogW10KICAgICAgfSwKICAgICAgUGVybWlzc2lvbkFwaURhdGE6IFtdLAogICAgICBjaGVja2VkRGF0YTogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8g6I+c5Y2V5p2D6ZmQ5qCRCiAgICB0cmVlRGF0YTogZnVuY3Rpb24gdHJlZURhdGEoKSB7CiAgICAgIHZhciBjaGVja2VkRGF0YSA9IHRoaXMuUGVybWlzc2lvbkFwaURhdGE7CiAgICAgIHZhciBjaGVja2VkID0gZmFsc2U7CiAgICAgIGlmIChfdGhpcyAhPT0gbnVsbCAmJiBfdGhpcy5mb3JtQmFzZS5hcGlzLmxlbmd0aCA+IDApIHsKICAgICAgICB2YXIgcGVyID0gX3RoaXMuZm9ybUJhc2UuYXBpcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0pOwogICAgICAgIHZhciB1c2UgPSBwZXIubWFwKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICBjaGVja2VkRGF0YS5maWx0ZXIoZnVuY3Rpb24gKG1pbmkpIHsKICAgICAgICAgICAgaWYgKG1pbmkuaWQgPT09IGl0ZW0pIHsKICAgICAgICAgICAgICBtaW5pLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gY2hlY2tlZERhdGE7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDpgLvovpHkuJrliqEKICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgIC8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioKICAgIC8vIOW8ueWxguaYvuekugogICAgZGlhbG9nRm9ybVY6IGZ1bmN0aW9uIGRpYWxvZ0Zvcm1WKCkgewogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAvLyDlvLnlsYLpmpDol48KICAgIGRpYWxvZ0Zvcm1IOiBmdW5jdGlvbiBkaWFsb2dGb3JtSCgpIHsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIC8vIOmAgOWHugogICAgaGFuZGxlQ2xvc2U6IGZ1bmN0aW9uIGhhbmRsZUNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCdoYW5kbGVDbG9zZU1vZGFsJyk7CiAgICB9LAogICAgLy8g6IqC54K55aSN6YCJ5qGG6KKr6YCJ5LitCiAgICBoYW5kbGVDaGVja0NoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2hlY2tDaGFuZ2Uobm9kZXMpIHsKICAgICAgdmFyIGNoZWNrZWREYXRhID0gW107CiAgICAgIGNoZWNrZWREYXRhLnB1c2gobm9kZXMpOwogICAgfSwKICAgIC8vIOmrmOe6p+aOpeWPo+aVsOaNruWIl+ihqAogICAgbG9hZEFwaVBlcm1pc3Npb25EYXRhOiBmdW5jdGlvbiBsb2FkQXBpUGVybWlzc2lvbkRhdGEoKSB7CiAgICAgIGxpc3QoKS50aGVuKGZ1bmN0aW9uIChyZXQsIGVycikgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgfQogICAgICAgIF90aGlzLlBlcm1pc3Npb25BcGlEYXRhID0gcmV0LmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIOmrmOe6p+aOpeWPo+ihqOWNleivpuaDheaVsOaNruWKoOi9vQogICAgaGFubGRlRWRpdEFwaUZvcm06IGZ1bmN0aW9uIGhhbmxkZUVkaXRBcGlGb3JtKG9iamVkaXRJZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgLy8g6I635Y+W5p2D6ZmQ5qCH6aKYCiAgICAgIHRoaXMuZm9ybUJhc2UuaWQgPSBvYmplZGl0SWQ7CiAgICAgIGRldGFpbHMoewogICAgICAgIGlkOiBvYmplZGl0SWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmV0LCBlcnIpIHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICByZXR1cm4gZXJyOwogICAgICAgIH0KICAgICAgICBfdGhpczIuZm9ybUJhc2UuaWQgPSByZXQuZGF0YS5pZDsKICAgICAgICBfdGhpczIuZm9ybUJhc2UudGl0bGUgPSByZXQuZGF0YS50aXRsZTsKICAgICAgfSk7CiAgICAgIF90aGlzLmxvYWRBcGlQZXJtaXNzaW9uRGF0YSgpOwogICAgICAvLyDor7vlj5bmjojmnYMKICAgICAgYXBpcmVhZCh7CiAgICAgICAgaWQ6IG9iamVkaXRJZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXQsIGVycikgewogICAgICAgIGlmIChlcnIpIHsKICAgICAgICAgIHJldHVybiBlcnI7CiAgICAgICAgfQogICAgICAgIF90aGlzMi5mb3JtQmFzZS5hcGlzID0gcmV0LmRhdGEuYXBpczsKICAgICAgfSk7CiAgICB9LAogICAgLy8g6KGo5Y2V5o+Q5LqkCiAgICBoYW5kbGVTYXZlOiBmdW5jdGlvbiBoYW5kbGVTYXZlKG9iamVjdCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKICAgICAgdmFyIGN1ckFwaXMgPSBbXTsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKF90aGlzLmNoZWNrZWREYXRhKSwKICAgICAgICBfc3RlcDsKICAgICAgdHJ5IHsKICAgICAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICAgICAgdmFyIGl0ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBjdXJBcGlzLnB1c2goaXQuaWQpOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IuZigpOwogICAgICB9CiAgICAgIHRoaXMuJHJlZnNbb2JqZWN0XS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzMy4kZW1pdCgnaGFuZGxlQ2xvc2VNb2RhbCcpOwogICAgICAgICAgYXBpYWRkKHsKICAgICAgICAgICAgaWQ6IF90aGlzLmZvcm1CYXNlLmlkLAogICAgICAgICAgICBhcGlzOiBjdXJBcGlzCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXQsIGVycikgewogICAgICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGVycjsKICAgICAgICAgICAgfQogICAgICAgICAgICBfdGhpczMuJGVtaXQoJ25ld0RhdGFlcycsIF90aGlzMy5mb3JtQmFzZSk7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMzLiRNZXNzYWdlLmVycm9yKCcq5Y+35Li65b+F5aGr6aG5IScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICAvLyDmjILovb3nu5PmnZ8KICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgLy8g5Yib5bu65a6M5q+V54q25oCBCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIF90aGlzID0gdGhpczsKICB9LAogIC8vIOe7hOS7tuabtOaWsAogIHVwZGF0ZWQ6IGZ1bmN0aW9uIHVwZGF0ZWQoKSB7fQp9Ow=="},{"version":3,"mappings":";;;;;AA2BA;AACA;AACA;AACA;EACAA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;MACA;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACA;IACAC;MACA;MAEA;MACA;QACA;UACA;QACA;QACA;UACAF;YACA;cACAG;YACA;UACA;QACA;MACA;MACA;IACA;EACA;EACAC;IACA;IACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IACA;IACAC;MACA;MACAR;IACA;IACA;IACAS;MACAC;QACA;UACA;QACA;QACAC;MACA;IACA;IACA;IACAC;MAAA;MACA;MACA;MACAC;QAAAjB;MAAA;QACA;UACA;QACA;QACA;QACA;MACA;MACAe;MACA;MACAG;QAAAlB;MAAA;QACA;UACA;QACA;QACA;MACA;IACA;IACA;IACAmB;MAAA;MACA;MAAA,2CACAJ;QAAA;MAAA;QAAA;UAAA;UACAK;QACA;MAAA;QAAA;MAAA;QAAA;MAAA;MACA;QACA;UACA;UACAC;YAAArB;YAAAE;UAAA;YACA;cACA;YACA;YACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACA;EACAoB;EACA;EACAC;IACAR;EACA;EACA;EACAS;AACA","names":["name","props","data","dialogFormVisible","PermissionGroupsmenu","defaultProps","label","formBase","id","title","apis","PermissionApiData","checkedData","computed","treeData","mini","methods","dialogFormV","dialogFormH","handleClose","handleCheckChange","loadApiPermissionData","list","_this","hanldeEditApiForm","details","apiread","handleSave","curApis","apiadd","mounted","created","updated"],"sourceRoot":"src/module-manage/components","sources":["permissionsApi-add.vue"],"sourcesContent":["<template>\n  <div class=\"add-form\">\n    <el-dialog :title=\"apiTitle\" :visible.sync=\"dialogFormVisible\">\n    <el-form :rules=\"ruleInline\" ref=\"dataForm\" :model=\"formBase\" label-position=\"left\" label-width=\"120px\" style='width: 400px; margin-left:120px;'>\n          <el-form-item :label=\"$t('table.powerTitle')\" prop=\"title\">\n            <el-input v-model=\"formBase.title\"></el-input>\n          </el-form-item>\n          <el-form-item  :label=\"$t('table.powerDistriB')\">\n            <el-tree\n              ref=\"treeMenu\"\n              :data=\"treeData\"\n              show-checkbox\n              node-key=\"id\"\n              :default-expanded-keys=\"[0]\"\n              :props=\"defaultProps\" @check-change='handleCheckChange'>\n            </el-tree>\n          </el-form-item>\n        </el-form>\n        <div slot=\"footer\" class=\"dialog-footer\">\n          <el-button @click=\"handleClose\">{{$t('table.signOut')}}</el-button>\n          <el-button type=\"primary\" @click=\"handleSave('formBase')\">{{$t('table.preserve')}}</el-button>\n        </div>\n  </el-dialog>\n\n  </div>\n</template>\n<script>\nimport { detail, update, add } from '@/api/base/permissions'\nimport { list } from '@/api/base/menus.js'\nlet _this = []\nexport default {\n  name: 'PermissionGroupsApiAdd',\n  props: ['apiTitle', 'ruleInline'],\n  data () {\n    return {\n      dialogFormVisible: false,\n      PermissionGroupsmenu: [],\n      defaultProps: {\n        label: 'title'\n      },\n      formBase: {\n        id: 0,\n        title: '',\n        apis: []\n      },\n      PermissionApiData: [],\n      checkedData: []\n    }\n  },\n  computed: {\n    // 菜单权限树\n    treeData () {\n      const checkedData = this.PermissionApiData\n\n      const checked = false\n      if (_this !== null && _this.formBase.apis.length > 0) {\n        const per = _this.formBase.apis.map(item => {\n          return item\n        })\n        const use = per.map(item => {\n          checkedData.filter(mini => {\n            if (mini.id === item) {\n              mini.checked = true\n            }\n          })\n        })\n      }\n      return checkedData\n    }\n  },\n  methods: {\n    // 逻辑业务\n    // **********************************\n    // **********************************\n    // 弹层显示\n    dialogFormV () {\n      this.dialogFormVisible = true\n    },\n    // 弹层隐藏\n    dialogFormH () {\n      this.dialogFormVisible = false\n    },\n    // 退出\n    handleClose () {\n      this.$emit('handleCloseModal')\n    },\n    // 节点复选框被选中\n    handleCheckChange (nodes) {\n      var checkedData = []\n      checkedData.push(nodes)\n    },\n    // 高级接口数据列表\n    loadApiPermissionData () {\n      list().then((ret, err) => {\n        if (err) {\n          return err\n        }\n        _this.PermissionApiData = ret.data\n      })\n    },\n    // 高级接口表单详情数据加载\n    hanldeEditApiForm (objeditId) {\n      // 获取权限标题\n      this.formBase.id = objeditId\n      details({ id: objeditId }).then((ret, err) => {\n        if (err) {\n          return err\n        }\n        this.formBase.id = ret.data.id\n        this.formBase.title = ret.data.title\n      })\n      _this.loadApiPermissionData()\n      // 读取授权\n      apiread({ id: objeditId }).then((ret, err) => {\n        if (err) {\n          return err\n        }\n        this.formBase.apis = ret.data.apis\n      })\n    },\n    // 表单提交\n    handleSave (object) {\n      const curApis = []\n      for (const it of _this.checkedData) {\n        curApis.push(it.id)\n      }\n      this.$refs[object].validate(valid => {\n        if (valid) {\n          this.$emit('handleCloseModal')\n          apiadd({ id: _this.formBase.id, apis: curApis }).then((ret, err) => {\n            if (err) {\n              return err\n            }\n            this.$emit('newDataes', this.formBase)\n          })\n        } else {\n          this.$Message.error('*号为必填项!')\n        }\n      })\n    }\n  },\n  // 挂载结束\n  mounted: function () {},\n  // 创建完毕状态\n  created () {\n    _this = this\n  },\n  // 组件更新\n  updated: function () {}\n}\n</script>\n<style>\n.el-tree {\n  margin-top: 8px;\n}\n.el-tree-node__content {\n  height: auto;\n}\n.el-form--label-left .el-form-item__label {\n  text-align: right;\n}\n.el-dialog__footer {\n  text-align: right;\n}\n</style>\n"]}]}