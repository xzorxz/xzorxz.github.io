(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03d6923c"],{"23b1":function(t,e,a){"use strict";a("e2d0")},"685e":function(t,e,a){},"72a0":function(t,e,a){"use strict";a.d(e,"f",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"e",(function(){return l})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"d",(function(){return i}));var n=[{value:1,label:"启用"},{value:0,label:"禁用"}],s=[{value:1,label:"简单"},{value:2,label:"一般"},{value:3,label:"困难"}],l=[{value:1,label:"单选"},{value:2,label:"多选"},{value:3,label:"简答"}],r=["o2o","外包服务","企业服务","互联网金融","企业咨询","互联网","电子商务","其他"],o=[{value:1,label:"待审核"},{value:2,label:"通过"},{value:3,label:"拒绝"}],i=[{value:1,label:"已发布"},{value:2,label:"待发布"},{value:0,label:"已下架"}]},"9afe":function(t,e,a){"use strict";a("685e")},e2d0:function(t,e,a){},f21f:function(t,e,a){"use strict";a.r(e);a("498a"),a("a9e3");var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"dashboard-container"},[e("div",{staticClass:"app-container"},[e("el-card",{attrs:{shadow:"never"}},[e("el-form",{ref:"form",attrs:{model:t.form}},[e("div",{staticClass:"filter-container"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"标签名称：",prop:"tags"}},[e("el-input",{staticClass:"filter-item",staticStyle:{width:"180px"},attrs:{placeholder:"请输入"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.hQuery.apply(null,arguments)}},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1),e("el-col",{attrs:{span:8}},[e("el-form-item",{attrs:{label:"城市"}},[e("MyCity",{model:{value:t.form.provAndCity,callback:function(e){t.$set(t.form,"provAndCity",e)},expression:"form.provAndCity"}})],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",{attrs:{label:"企业简称：",prop:"shortName"}},[e("el-input",{staticStyle:{width:"180px"},model:{value:t.form.shortName,callback:function(e){t.$set(t.form,"shortName","string"===typeof e?e.trim():e)},expression:"form.shortName"}})],1)],1),e("el-col",{attrs:{span:4}},[e("el-form-item",{attrs:{label:"状态：",prop:"state"}},[e("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}},t._l(t.status,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),e("el-col",{attrs:{span:6}},[e("el-form-item",[e("el-button",{attrs:{loading:t.isLoading,size:"small",type:"primary"},on:{click:t.hQuery}},[t._v("查询")]),e("el-button",{attrs:{size:"small"},on:{click:t.hResetForm}},[t._v("重置")])],1)],1)],1),e("el-button",{staticClass:"filter-item fr",staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:t.hAddComponey}},[t._v("新增公司")])],1)]),t.cResultTip?e("el-alert",{staticClass:"alert",attrs:{title:t.cResultTip,type:"info",closable:!1,"show-icon":""}}):t._e(),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticStyle:{width:"100%"},attrs:{data:t.companys,"element-loading-text":"给我一点时间",fit:"","highlight-current-row":"",border:""}},[e("el-table-column",{attrs:{align:"center",label:"序号",width:"70"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.id))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"企业编号"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.number))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"企业简称"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.shortName))])]}}])}),e("el-table-column",{attrs:{label:"标签"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.tags))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"创建者"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.creatorID))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"创建日期"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.addDate))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.remarks.substring(0,3)))])]}}])}),e("el-table-column",{attrs:{align:"center",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(a){return[1==a.row.state?e("span",[t._v("启用")]):e("span",[t._v("禁用")])]}}])}),e("el-table-column",{attrs:{align:"center",label:"操作",width:"280","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.hEdit(a.row.id)}}},[t._v("编辑")]),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.hSwitchStatus(a.row)}}},[e("span",[t._v(t._s(0===a.row.state?"启用":"禁用"))])]),"deleted"!=a.row.status?e("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.hDelete(a.row.id)}}},[t._v("删除")]):t._e()]}}])})],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.total,expression:"total"}],staticClass:"pagination"},[e("div",{staticClass:"pages"},[e("el-pagination",{attrs:{background:"","current-page":Number(t.form.page),total:Number(t.total),"page-size":Number(t.form.pagesize),"page-sizes":[10,20,30,50],layout:"sizes, prev, pager, next, jumper"},on:{"size-change":t.hSizeChange,"current-change":t.hCurrentChange}})],1)])],1),t.isShowDialog?e("el-dialog",{attrs:{title:t.cTitle,visible:t.isShowDialog},on:{"update:visible":function(e){t.isShowDialog=e}}},[e("CompanysAdd",{ref:"editUser",attrs:{companyId:t.curCompanyId},on:{close:function(e){t.isShowDialog=!1},refresh:t.loadCompanys}})],1):t._e()],1)])},s=[],l=a("c7eb"),r=a("1da1"),o=a("72a0"),i=a("546c"),c=a("30c0"),u=a("bf15"),f={name:"CompanysList",components:{CompanysAdd:c["default"],MyCity:u["default"]},data:function(){return{companys:[],total:0,curCompanyId:null,isLoading:!1,isShowDialog:!1,form:{shortName:"",state:null,tags:"",provAndCity:{province:"",city:""},page:1,pagesize:10}}},created:function(){this.loadCompanys()},computed:{status:function(){return o["f"]},cResultTip:function(){return"共 ".concat(this.total," 条记录")},cTitle:function(){return this.curCompanyId?"编辑公司":"添加新公司"}},methods:{buildParams:function(){var t={},e=this.form,a=e.page,n=e.pagesize,s=e.provAndCity,l=e.tags,r=e.state;return t.page=a||null,t.pagesize=n||null,t.tags=l||null,t.province=s.city||null,t.city=s.city||null,t.state=""===r?null:r,t},loadCompanys:function(){var t=this;return Object(r["a"])(Object(l["a"])().mark((function e(){var a,n,s;return Object(l["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,a=t.buildParams(),e.prev=2,e.next=5,Object(i["d"])(a);case 5:n=e.sent,s=n.data,t.companys=s.items,t.total=s.counts,t.isLoading=!1,e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](2),console.log(e.t0),t.isLoading=!0;case 16:case"end":return e.stop()}}),e,null,[[2,12]])})))()},hResetForm:function(){this.$refs.form.resetFields(),this.form.provAndCity.province="",this.form.provAndCity.city=""},hQuery:function(){this.form.page=1,this.loadCompanys()},hSizeChange:function(t){this.form.pagesize=t,1===this.form.page&&this.loadCompanys()},hCurrentChange:function(t){this.form.page=t,this.loadCompanys()},hAddComponey:function(){this.curCompanyId="",this.isShowDialog=!0},hEdit:function(t){this.curCompanyId=t,this.isShowDialog=!0},doDelete:function(t){var e=this;return Object(r["a"])(Object(l["a"])().mark((function a(){return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(i["e"])({id:t});case 3:e.$message.success("成功删除了用户!"),e.loadCompanys(),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),e.$message.error("删除失败!");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()},hDelete:function(t){var e=this;this.$confirm("此操作将永久删除用户 , 是否继续?","提示",{type:"warning"}).then((function(){e.doDelete(t)})).catch((function(){e.$message.info("已取消操作!")}))},doSwitch:function(t){var e=this;return Object(r["a"])(Object(l["a"])().mark((function a(){var n;return Object(l["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={id:t.id,state:Number(!t.state)},console.log(n),a.next=4,Object(i["c"])(n).then((function(t){e.$message.success("操作成功!"),e.loadCompanys(e.form)})).catch((function(t){e.$message.error(o["f"]+"失败!")}));case 4:case"end":return a.stop()}}),a)})))()},hSwitchStatus:function(t){var e=this,a="已成功"+(t.state?"禁用":"启用")+", 是否继续?";this.$confirm(a,"提示",{type:"warning"}).then((function(){e.doSwitch(t)})).catch((function(){e.$message.info("已取消操作!")}))}}},d=f,p=(a("23b1"),a("9afe"),a("2877")),m=Object(p["a"])(d,n,s,!1,null,"1d2d2f3a",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-03d6923c.10d5923a.js.map