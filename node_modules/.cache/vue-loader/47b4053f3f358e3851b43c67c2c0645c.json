{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-manage/pages/users.vue?vue&type=style&index=1&id=3557afcb&lang=css&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-manage/pages/users.vue","mtime":1668475987756},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/css-loader/dist/cjs.js","mtime":1666491586395},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1666491603796},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/postcss-loader/src/index.js","mtime":1666491592715},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lbC10YWJsZSB0aCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTsKfQouZWwtdGFibGUgdGguaXMtbGVhZiB7CiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlOGU4ZTg7Cn0KLyogLmVsLWZvcm0taXRlbSB7CiAgbWFyZ2luLWJvdHRvbTogMDsKfSAqLwouZGlzYWJsZWQgdGQgewogIGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7CiAgY29sb3I6ICNjMWMxYzE7Cn0KLmRpc2FibGVkIC5lbC1idXR0b24tLXByaW1hcnksCi5kaXNhYmxlZCAuZWwtYnV0dG9uLS1kYW5nZXIgewogIGJhY2tncm91bmQtY29sb3I6ICNkYmRhZGE7CiAgYm9yZGVyOiAxcHggc29saWQgI2RiZGFkYTsKICBjb2xvcjogIzk5OTsKICBjdXJzb3I6IG5vdC1hbGxvd2VkOwp9Cg=="},{"version":3,"sources":["users.vue"],"names":[],"mappings":";AA2KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"users.vue","sourceRoot":"src/module-manage/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <!-- 搜索 -->\n        <el-form :model=\"requestParameters\" ref=\"requestParameters\">\n          <div class=\"filter-container\">\n            <el-form-item>\n              <el-input\n                @keyup.enter=\"handleFilter\"\n                style=\"width: 200px;\"\n                :placeholder=\"$t('table.search')\"\n                class=\"filter-item\"\n                v-model=\"requestParameters.username\"\n              ></el-input>\n              <el-button\n                class=\"filter-item\"\n                size=\"small\"\n                type=\"primary\"\n                icon=\"el-icon-search\"\n                @click=\"handleFilter\"\n              >{{$t('table.search')}}</el-button>\n              <el-button class=\"filter-item\" size=\"small\" type=\"primary\" @click=\"resetForm\">重置</el-button>\n            </el-form-item>\n            <el-button\n              class=\"filter-item fr\"\n              size=\"small\"\n              style=\"margin-left: 10px;\"\n              @click=\"handleCreate\"\n              type=\"primary\"\n              icon=\"el-icon-edit\"\n            >{{$t('table.addUser')}}</el-button>\n          </div>\n        </el-form>\n        <el-alert\n          v-if=\"alertText !== ''\"\n          :title=\"alertText\"\n          type=\"info\"\n          class=\"alert\"\n          :closable=\"false\"\n          show-icon\n        ></el-alert>\n        <!-- end -->\n        <!-- 数据 -->\n        <el-table\n          :key=\"tableKey\"\n          :data=\"dataList\"\n          :row-class-name=\"rowClassStatus\"\n          v-loading=\"listLoading\"\n          element-loading-text=\"给我一点时间\"\n          fit\n          highlight-current-row\n          style=\"width: 100%\"\n          border\n        >\n          <el-table-column align=\"center\" :label=\"$t('table.id')\">\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.id}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column align=\"center\" :label=\"$t('table.email')\">\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.email}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column :label=\"$t('table.phone')\">\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.phone}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column align=\"center\" :label=\"$t('table.username')\">\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.username}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column align=\"center\" :label=\"$t('table.permissionUser')\">\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.permission_group_title}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column align=\"center\" :label=\"$t('table.role')\">\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.role}}</span>\n            </template>\n          </el-table-column>\n          <!-- 按钮 -->\n          <el-table-column\n            align=\"center\"\n            :label=\"$t('table.actions')\"\n            class-name=\"small-padding fixed-width\"\n          >\n            <template slot-scope=\"scope\">\n              <el-button\n                type=\"primary\"\n                size=\"mini\"\n                @click=\"handleUpdate(scope.row.id)\"\n              >{{$t('table.edit')}}</el-button>\n              <el-button\n                v-if=\"scope.row.status!='deleted'\"\n                size=\"mini\"\n                type=\"danger\"\n                @click=\"removeUser(scope.row.id)\"\n              >{{$t('table.delete')}}</el-button>\n            </template>\n          </el-table-column>\n\n          <!-- 头像 -->\n          <!-- <el-table-column align=\"center\" :label=\"$t('table.avatar')\">\n            <template slot-scope=\"scope\">\n              <img :src=\"scope.row.avatar\" style=\"width:50px;height:50px;\">\n            </template>\n          </el-table-column> -\n          <el-table-column align=\"center\" width=\"350px\" :label=\"$t('table.introduction')\">\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.introduction}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column align=\"center\" :label=\"$t('table.actions')\" class-name=\"small-padding fixed-width\">\n            <template slot-scope=\"scope\" v-show=\"deletedDate\">\n              <el-button type=\"primary\" size=\"mini\" @click=\"handleUpdate(scope.row.id)\">{{$t('table.edit')}}</el-button>\n              <el-button v-if=\"scope.row.status!='deleted'\" size=\"mini\" type=\"danger\" @click=\"removeUser(scope.row.id)\">{{$t('table.delete')}}\n              </el-button>\n            </template>\n            <template slot-scope=\"scope\" v-show=\"showDate\">\n              <el-button type=\"primary\" size=\"mini\">{{$t('table.edit')}}</el-button>\n              <el-button v-if=\"scope.row.status!='deleted'\" size=\"mini\" type=\"danger\">{{$t('table.delete')}}\n              </el-button>\n            </template>\n          </el-table-column>\n          -->\n        </el-table>\n        <!-- end -->\n        <!-- 分页 -->\n        <div class=\"pagination\">\n          <PageTool\n            :paginationPage=\"requestParameters.page\"\n            :paginationPagesize=\"requestParameters.pagesize\"\n            :total=\"total\"\n            @pageChange=\"handleCurrentChange\"\n            @pageSizeChange=\"handleSizeChange\"\n          ></PageTool>\n        </div>\n        <!-- end -->\n        <!-- 新增标签弹层 -->\n        <component\n          v-bind:is=\"UserAdd\"\n          ref=\"editUser\"\n          :formData.sync=\"requestParameters\"\n          :text=\"text\"\n          :pageTitle=\"pageTitle\"\n          :formBase=\"formData\"\n          :ruleInline=\"ruleInline\"\n          :PermissionGroupsList=\"PermissionGroupsList\"\n          v-on:newDataes=\"handleLoadDataList\"\n          v-on:handleCloseModal=\"handleCloseModal\"\n        ></component>\n      </el-card>\n    </div>\n  </div>\n</template>\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.alert {\n  margin: 10px 0px;\n}\n.pagination {\n  margin-top: 10px;\n  // text-align: right;\n}\n</style>\n\n<style>\n.el-table th {\n  background-color: #fafafa;\n}\n.el-table th.is-leaf {\n  border-bottom: 2px solid #e8e8e8;\n}\n/* .el-form-item {\n  margin-bottom: 0;\n} */\n.disabled td {\n  background-color: #f9f9f9;\n  color: #c1c1c1;\n}\n.disabled .el-button--primary,\n.disabled .el-button--danger {\n  background-color: #dbdada;\n  border: 1px solid #dbdada;\n  color: #999;\n  cursor: not-allowed;\n}\n</style>\n<script>\nimport { simple } from '@/api/base/permissions'\n// import { list, remove, detail, update, add } from '@/api/base/users'\nimport { list, remove, detail, update, add } from '@/api/base/users'\nimport PageTool from './../components/page-tool'\nimport UserAdd from './../components/user-add'\n\nexport default {\n  name: 'base-users',\n  components: {\n    UserAdd,\n    PageTool\n  },\n  data () {\n    return {\n      UserAdd: 'userAdd',\n      pageTitle: '用户', // 页面标题\n      text: '', // 新增、编辑文本\n      tableKey: 0,\n      deletedDate: false,\n      showDate: true,\n      dataList: [],\n      PermissionGroupsList: [], // 权限组加载\n      total: null,\n      listLoading: true,\n      dialogStatus: '',\n      alertText: '',\n      requestParameters: {\n        page: 1,\n        pagesize: 10\n        // username: this.username\n      },\n      formData: {\n        email: '',\n        phone: '',\n        username: '',\n        password: '',\n        role: '',\n        permission_group_id: '',\n        permission_group_title: '',\n        avatar: '',\n        introduction: ''\n      },\n      ruleInline: {\n        // 表单验证\n        username: [\n          { required: true, message: '用户名不能为空', trigger: 'blur' }\n        ],\n        email: [{ required: true, message: '邮箱不能为空', trigger: 'blur' }],\n        password: [{ required: true, message: '密码不能为空', trigger: 'blur' }]\n        // role: [{ required: true, message: '角色不能为空', trigger: 'blur' }],\n        // permission_group_id: [\n        //   {\n        //     type: 'number',\n        //     required: true,\n        //     message: '权限组名称不能为空',\n        //     trigger: 'blur'\n        //   }\n        // ]\n      }\n    }\n  },\n  computed: {},\n  methods: {\n    // 获取列表数据\n    getList (params) {\n      this.listLoading = true\n      list(this.requestParameters)\n        .then(data => {\n          this.dataList = data.data.list\n          this.total = data.data.counts\n          this.alertText = `共 ${this.total} 条记录`\n          this.listLoading = false\n        })\n        .catch(e => {\n          this.$message.e('错了哦，这是一条错误消息')\n        })\n    },\n    // 权限列表\n    setupData () {\n      simple().then(data => {\n        this.PermissionGroupsList = data.data\n      })\n    },\n    // 重置\n    resetForm () {\n      this.$refs.requestParameters.resetFields()\n    },\n    // 搜索信息\n    handleFilter () {\n      this.requestParameters.page = 1\n      this.getList(this.requestParameters)\n    },\n    // 每页显示信息条数\n    handleSizeChange (val) {\n      this.requestParameters.pagesize = val\n      if (this.requestParameters.page === 1) {\n        this.getList(this.requestParameters)\n      }\n    },\n    // 进入某一页\n    handleCurrentChange (val) {\n      this.requestParameters.page = val\n      this.getList()\n    },\n    // 新增用户刷新列表\n    handleLoadDataList () {\n      this.getList()\n    },\n    // 数据删除后显示样式\n    rowClassStatus (row) {\n      if (row.row.is_deleted === 1) {\n        this.deletedDate = true\n        this.showDate = false\n        return 'disabled'\n      } else {\n        return ''\n      }\n    },\n    // **********************************\n    // 搜索的项目\n    query () {\n      this.formData = {\n        email: '',\n        phone: '',\n        username: '',\n        role: '',\n        password: '',\n        permission_group_id: '',\n        avatar: '',\n        introduction: ''\n      }\n    },\n    // 新增用户\n    handleCreate () {\n      this.query()\n      this.text = '创建'\n      this.$refs.editUser.dialogFormV()\n      this.setupData()\n    },\n    // 窗口操作**********************************\n    // 弹框关闭\n    handleCloseModal () {\n      this.$refs.editUser.dialogFormH()\n    },\n    // 编辑\n    // 表单详情数据加载\n    hanldeEditForm (objeditId) {\n      this.formData.id = objeditId\n      this.setupData()\n      detail({ id: objeditId }).then((data, err) => {\n        var datalist = data.data\n        if (err) {\n          return err\n        }\n        this.formData.id = datalist.id\n        this.formData.email = datalist.email\n        this.formData.phone = datalist.phone\n        this.formData.username = datalist.username\n        this.formData.role = datalist.role\n        this.formData.password = datalist.password\n        this.formData.avatar = datalist.avatar\n        this.formData.introduction = datalist.introduction\n        this.formData.permission_group_id = datalist.permission_group_id\n        this.formData.permission_group_title = datalist.permission_group_title\n      })\n    },\n    handleUpdate (objeditId) {\n      this.query()\n      var _this = this\n      this.text = '编辑'\n      this.$refs.editUser.dialogFormV()\n      _this.hanldeEditForm(objeditId)\n    },\n    // 删除\n    removeUser (user) {\n      this.$confirm('此操作将永久删除用户 ' + ', 是否继续?', '提示', {\n        type: 'warning'\n      })\n        .then(() => {\n          remove({ id: user })\n            .then(response => {\n              this.$message.success('成功删除了用户' + '!')\n              this.dataList.splice(user, 1)\n              this.getList(this.requestParameters)\n            })\n            .catch(response => {\n              this.$message.error('删除失败!')\n            })\n        })\n        .catch(() => {\n          this.$message.info('已取消操作!')\n        })\n    }\n  },\n  // 挂载结束\n  mounted: function () {},\n  // 创建完毕状态\n  created () {\n    // 读取数据\n    this.getList()\n    // 键盘enter操作\n    var lett = this\n    document.onkeydown = function (e) {\n      var key = window.event.keyCode\n      if (key === 13) {\n        lett.handleFilter(this.requestParameters)\n      }\n    }\n  },\n  // 组件更新\n  updated: function () {}\n}\n</script>\n"]}]}