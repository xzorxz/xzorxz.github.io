{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/tags.vue?vue&type=style&index=0&id=01d505a6&scoped=true&lang=scss&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/tags.vue","mtime":1668475987754},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/css-loader/dist/cjs.js","mtime":1666491586395},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1666491603796},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/postcss-loader/src/index.js","mtime":1666491592715},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/sass-loader/dist/cjs.js","mtime":1666491618412},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jcnVtYkhlYWRlciB7CiAgbWFyZ2luLWJvdHRvbTogMzBweDsKfQo="},{"version":3,"sources":["tags.vue"],"names":[],"mappings":";AAqRA;AACA;AACA","file":"tags.vue","sourceRoot":"src/module-hmmm/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <!-- 面包屑 -->\n        <el-breadcrumb\n          separator-class=\"el-icon-arrow-right\"\n          class=\"crumbHeader\"\n        >\n          <el-breadcrumb-item>首页</el-breadcrumb-item>\n          <el-breadcrumb-item>活动列表</el-breadcrumb-item>\n        </el-breadcrumb>\n\n        <!-- 输入框 -->\n        <el-form :inline=\"true\" class=\"demo-form-inline\" >\n          <el-form-item label=\"标签名称\" style=\"margin-right: 40px\">\n            <el-input v-model=\"reqParams.tagName\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"状态\">\n            <el-select v-model=\"reqParams.status\" placeholder=\"请选择\">\n              <el-option label=\"启用\" :value=\"1\"></el-option>\n              <el-option label=\"禁用\" :value=\"0\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"clear()\">清除</el-button>\n            <el-button type=\"primary\" @click=\"filter()\">搜索</el-button>\n          </el-form-item>\n\n          <!-- 右侧新增标签 -->\n          <el-button\n            type=\"success\"\n            icon=\"el-icon-edit\"\n            style=\"float: right\"\n            v-if=\"$route.query.id\"\n            @click=\"$router.back()\"\n            >返回学科</el-button\n          >\n          <el-button\n            type=\"success\"\n            icon=\"el-icon-edit\"\n            style=\"float: right\"\n            @click=\"handleShow\"\n            >新增标签</el-button\n          >\n        </el-form>\n\n        <!-- alert警告 -->\n        <!-- es6语法 -->\n        <el-alert\n          :title=\"`数据一共${total}条`\"\n          type=\"info\"\n          show-icon\n          :closable=\"false\"\n          style=\"margin-bottom: 15px\"\n        ></el-alert>\n\n        <!-- 表格 -->\n        <el-table :data=\"tableData\" style=\"width: 100%; margin-bottom: 15px;padding-left:20px\" ref=\"formDate\">\n          <el-table-column type=\"index\" label=\"序号\" width=\"150\">\n          </el-table-column>\n          <el-table-column prop=\"subjectName\" label=\"所属学科\" >\n          </el-table-column>\n          <el-table-column prop=\"tagName\" label=\"标签名称\" >\n          </el-table-column>\n          <el-table-column prop=\"username\" label=\"创建者\" >\n          </el-table-column>\n          <el-table-column prop=\"addDate\" label=\"创建日期\" >\n            <template slot-scope=\"scope\">\n              {{ scope.row.addDate | parseTimeByString }}\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"state\" label=\"状态\" >\n            <template #default=\"{ row }\">\n              {{ row.state === 1 ? \"已启用\" : \"已禁用\" }}\n            </template>\n          </el-table-column>\n          <el-table-column fixed=\"right\" label=\"操作\" width=\"150\">\n            <template #default=\"{ row }\">\n              <!-- 三个小按钮 -->\n              <el-button @click=\"startRow(row)\" type=\"text\" size=\"small\">\n                {{ row.state === 1 ? \"禁用\" : \"启用\" }}\n              </el-button>\n              <el-button\n                @click=\"handleShowtwo(row)\"\n                type=\"text\"\n                size=\"small\"\n                :disabled=\"row.state === 1\"\n              >\n                修改\n              </el-button>\n              <el-button\n                @click=\"deleteRow(row.id)\"\n                type=\"text\"\n                size=\"small\"\n                :disabled=\"row.state === 1\"\n              >\n                删除\n              </el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <!-- 分页 -->\n        <!-- page-sizes 每页显示条目个数  total 总条目数\n           -->\n        <div class=\"pages\">\n          <el-pagination\n            background\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange \"\n            :current-page=\"currentPage\"\n            :total=\"total\"\n            :page-size=\"10\"\n            :page-sizes=\"[10, 20, 30, 50]\"\n            :pager = 1\n            layout=\"prev,pager, next, sizes,jumper\"\n            style=\"float:right;margin-bottom:20px\"\n          >\n          </el-pagination>\n        </div>\n        <!-- 弹框 -->\n      </el-card>\n      <tags-add :showDialog.sync=\"showDialog\" ref=\"addForm\" :formId=\"formId\" @getTabledata=\"getTableData\" @updateList=\"updateList\"></tags-add>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { list, changeState, remove } from '@/api/hmmm/tags.js'\nimport TagsAdd from '../components/tags-add.vue'\n\nexport default {\n  components: {\n    TagsAdd\n  },\n\n  data () {\n    return {\n      reqParams: {\n        page: 1,\n        pagesize: 10,\n        tagName: null,\n        status: null,\n        editId: 0,\n        subjectName: null\n      },\n      tableData: [],\n      // total: null,\n      total: 0,\n      // pageSizes: [20, 50, 80, 120],\n      currentPage: 1,\n      showDialog: false,\n      formId: null,\n      formData: {\n        id: null,\n        directoryName: null,\n        subjectID: null\n      }\n\n    }\n  },\n  async created () {\n    this.getTableData()\n    // if (this.$route.query.id) {\n    //   this.reqParams.editId = this.$route.query.id\n    //   this.reqParams.subjectName = this.$route.query.name\n    //   const { data } = await list(this.reqParams)\n    //   console.log(data)\n    // }\n  },\n  methods: {\n    // 清除\n    clear () {\n      this.reqParams = {\n        tagsName: null,\n        state: null,\n        page: 1,\n        pagesize: 10\n      }\n    },\n    // 搜索学科\n    filter () {\n      this.reqParams.page = 1\n      this.getTableData()\n    },\n\n    // 按钮点击事件方法\n    async startRow (tag) {\n      // rows.splice(index, 1)\n      console.log('启用了')\n      await changeState({\n        id: tag.id,\n        state: tag.state === 1 ? 0 : 1\n      })\n      this.$message.success('操作成功')\n      tag.state = tag.state === 1 ? 0 : 1\n    },\n    editRow () {\n      // rows.splice(index, 1)\n      console.log('可以修改了')\n    },\n\n    deleteRow (id) {\n      // rows.splice(index, 1)\n      console.log('删除')\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        await remove({ id })\n        this.getTableData()\n        this.$message.success('删除成功')\n      }).catch(() => {\n        this.$message.info('已取消删除')\n      })\n\n      this.getTableData()\n    },\n\n    /* 新增标签 */\n    handleShow () {\n      this.showDialog = true\n      this.$refs.addForm.title = '新增标签'\n      // console.log(111)\n    },\n    // 修改\n    handleShowtwo (row) {\n      this.showDialog = true\n      this.formId = row.id\n      this.$refs.addForm.title = '修改标签'\n      this.$refs.addForm.formData.subjectID = row.subjectID\n      this.$refs.addForm.formData.tagName = row.tagName\n      // console.log(111)\n    },\n    // 重新渲染页面\n    updateList () {\n      this.reqParams.page = 1\n      this.getTableData()\n    },\n    /* 分页器 */\n\n    // 获取标签列表\n    async getTableData () {\n      if (this.$route.query.id) {\n        this.formData.subjectID = this.$route.query.id\n        this.formData.subjectName = this.$route.query.name\n        const { data } = await list(this.formData)\n        console.log(data)\n        this.tableData = data.items\n        this.total = data.counts\n      } else {\n        const { data } = await list(this.reqParams)\n        console.log(data)\n        // 渲染页面数据\n        this.tableData = data.items\n        this.total = data.counts\n      }\n    },\n    // size发送变化触发的方法\n    handleSizeChange (val) {\n      console.log(val)\n      this.reqParams.page = 1\n      this.reqParams.pagesize = val\n      this.getTableData()\n    },\n    // 页码发生变化触发的方法\n    handleCurrentChange (val) {\n      this.reqParams.page = val\n      this.getTableData()\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.crumbHeader {\n  margin-bottom: 30px;\n}\n</style>\n"]}]}