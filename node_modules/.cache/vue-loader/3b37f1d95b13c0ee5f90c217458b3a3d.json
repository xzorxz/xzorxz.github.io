{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/subjects.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/subjects.vue","mtime":1668476050574},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGxpc3QsIHJlbW92ZSB9IGZyb20gJ0AvYXBpL2htbW0vc3ViamVjdHMuanMnIC8vIOaOpeWPo+W8leWFpQppbXBvcnQgU3ViamVjdHNBZGQgZnJvbSAnLi4vY29tcG9uZW50cy9zdWJqZWN0cy1hZGQudnVlJyAvLyDlvLnnqpfnu4Tku7blvJXlhaUKaW1wb3J0IGRheWpzIGZyb20gJ2RheWpzJwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBTdWJqZWN0c0FkZCB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFnZTogMSwgLy8g5YiG6aG15Zmo6aG156CBCiAgICAgIHBhZ2VzaXplOiAxMCwgLy8g5q+P6aG15p2h5pWwCiAgICAgIHRvdGFsOiBudWxsLCAvLyDmgLvmnaHmlbAKICAgICAgbGlzdDogW10sIC8vIOS7juaOpeWPo+WkhOWPluWbngogICAgICB0aXRsZTogJycsIC8vIOWktOmDqOaAu+adoeaVsAogICAgICBpbnB1dDogJycsIC8vIGlucHV05qGGCiAgICAgIHZpc2libGU6IGZhbHNlLCAvLyDlvLnnqpcKICAgICAgZm9ybUlkOiAnJywgLy8g5a2Q57uE5Lu25Zue5pi+aWQKICAgICAgLy8g5pCc57Si5Y+C5pWwCiAgICAgIG5hbWVEYXRhOiB7CiAgICAgICAgc3ViamVjdE5hbWU6ICcnLAogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgcGFnZXNpemU6IDEwCiAgICAgIH0KCiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDpobXpnaLliJfooajmuLLmn5MKICAgIGFzeW5jIGdldExpc3QgKCkgewogICAgICBjb25zdCB7IGRhdGE6IHsgaXRlbXMsIHBhZ2UsIHBhZ2VzaXplLCBjb3VudHMgfSB9ID0gYXdhaXQgbGlzdCh7IHBhZ2U6IHRoaXMucGFnZSwgcGFnZXNpemU6IHRoaXMucGFnZXNpemUgfSkKICAgICAgLy8gY29uc29sZS5sb2coeyBpdGVtcywgcGFnZSwgcGFnZXNpemUsIGNvdW50cyB9KQogICAgICAvLyB0aGlzLmxpc3RzID0gZGF0YQogICAgICAvLyBjb25zdCByZXMgPSBpdGVtcy5pc0Zyb250RGlzcGxheSA9PT0gMCA/ICflkKYnIDogJ+aYrycKICAgICAgLy8gY29uc29sZS5sb2cocmVzKQogICAgICB0aGlzLnBhZ2UgPSArcGFnZQogICAgICB0aGlzLnBhZ2VzaXplID0gK3BhZ2VzaXplCiAgICAgIHRoaXMubGlzdCA9IGl0ZW1zCiAgICAgIHRoaXMudGl0bGUgPSArY291bnRzCiAgICAgIHRoaXMudG90YWwgPSArY291bnRzCiAgICB9LAogICAgLy8gaW5wdXTmoYbmuIXpmaQKICAgIGVtcHR5SW5wdXQgKCkgewogICAgICB0aGlzLmlucHV0ID0gJycKICAgIH0sCiAgICAvLyDmkJzntKLmoYYg5bm25riy5p+TCiAgICBhc3luYyBoYW5kbGVGaWx0ZXIgKCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmlucHV0KQogICAgICB0aGlzLm5hbWVEYXRhLnN1YmplY3ROYW1lID0gdGhpcy5pbnB1dAogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGxpc3QodGhpcy5uYW1lRGF0YSkKICAgICAgdGhpcy5saXN0ID0gZGF0YS5pdGVtcwogICAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgfSwKICAgIC8vIOe8lui+keWtpuenkeW8ueeqlwogICAgcmV2aXNlQ2xpY2sgKHJvdykgewogICAgICBjb25zb2xlLmxvZyhyb3cpCiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy4kcmVmcy5TdWJqZWN0c0FkZFJlZnMuZm9ybS5zdWJqZWN0TmFtZSA9IHJvdy5zdWJqZWN0TmFtZQogICAgICB0aGlzLiRyZWZzLlN1YmplY3RzQWRkUmVmcy5mb3JtLmlzRnJvbnREaXNwbGF5ID0gcm93LmlzRnJvbnREaXNwbGF5CiAgICAgIHRoaXMuZm9ybUlkID0gcm93LmlkCiAgICAgIHRoaXMuJHJlZnMuU3ViamVjdHNBZGRSZWZzLnRpdGxlID0gJ+e8lui+keWtpuenkScKICAgIH0sCiAgICAvLyDliKDpmaQKICAgIGFzeW5jIHJlbW92ZUNsaWNrIChyb3cpIHsKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5a2m56eRLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbihhc3luYyAoKSA9PiB7CiAgICAgICAgYXdhaXQgcmVtb3ZlKHJvdykKICAgICAgICB0aGlzLmdldExpc3QoKQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfSkKICAgIH0sCiAgICAvLyDml7bpl7TlpITnkIYKICAgIGZvcm1hdFRpbWUgKHRpbWUsIHN0cikgewogICAgICByZXR1cm4gZGF5anModGltZSkuZm9ybWF0KHN0cikKICAgIH0sCiAgICAvLyDmlrDlop7lrabnp5HlvLnnqpcKICAgIG5ld2x5QWRkZWQgKCkgewogICAgICAvLyBjb25zb2xlLmxvZygxMTEpCiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWUKICAgICAgdGhpcy4kcmVmcy5TdWJqZWN0c0FkZFJlZnMudGl0bGUgPSAn5paw5aKe5a2m56eRJwogICAgfSwKICAgIC8vIOmhteeggQogICAgaGFuZGxlU2l6ZUNoYW5nZSAoVmFsKSB7CiAgICAgIHRoaXMucGFnZXNpemUgPSBWYWwKICAgICAgdGhpcy5wYWdlID0gMQogICAgICBpZiAodGhpcy5wYWdlID09PSAxKSB7CiAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgfQogICAgfSwKICAgIC8vIOmhteeggeWPkeeUn+WPmOWMluinpuWPkeeahOaWueazlQogICAgaGFuZGxlQ3VycmVudENoYW5nZSAoVmFsKSB7CiAgICAgIHRoaXMucGFnZSA9IFZhbAogICAgICB0aGlzLmdldExpc3QoKQogICAgfQoKICB9Cn0K"},{"version":3,"sources":["subjects.vue"],"names":[],"mappings":";AAyHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"subjects.vue","sourceRoot":"src/module-hmmm/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <el-form>\n          <div class=\"filter-container\">\n            <el-form-item>\n              <label class=\"el-form-item__label\" style=\"width: 80px\"\n                >学科名称</label\n              >\n              <el-input\n                clearable\n                v-model=\"input\"\n                style=\"width: 200px\"\n                class=\"filter-item\"\n              ></el-input>\n              <el-button\n                class=\"filter-item\"\n                size=\"small\"\n                style=\"margin-left: 10px\"\n                @click=\"emptyInput\"\n                >清除</el-button\n              >\n              <el-button\n                class=\"filter-item\"\n                size=\"small\"\n                type=\"primary\"\n                icon=\"el-icon-search\"\n                @click=\"handleFilter\"\n                >搜索</el-button\n              >\n              <el-button\n                class=\"filter-item fr\"\n                size=\"small\"\n                style=\"margin-left: 10px\"\n                type=\"success\"\n                icon=\"el-icon-edit\"\n                @click=\"newlyAdded\"\n                >新增学科</el-button\n              >\n            </el-form-item>\n            <el-alert\n              :title=\"`数据一共${title}条`\"\n              type=\"info\"\n              class=\"alert\"\n              :closable=\"false\"\n              show-icon\n            ></el-alert>\n          </div>\n          <!-- </el-form-item> -->\n        </el-form>\n          <el-table :data=\"list\" style=\"width: 100%\">\n          <el-table-column label=\"序号\" prop=\"id\" type=\"index\"></el-table-column>\n          <el-table-column\n            label=\"学科名称\"\n            prop=\"subjectName\"\n          ></el-table-column>\n          <el-table-column label=\"创建者\" prop=\"username\"></el-table-column>\n          <el-table-column label=\"创建日期\" prop=\"addDate\">\n            <template #default=\"{ row }\">{{\n              formatTime(row.timeOfEntry, \"YYYY-MM-DD\")\n            }}</template>\n          </el-table-column>\n            <el-table-column\n            label=\"前台是否显示\"\n            prop=\"isFrontDisplay\"\n          >\n          <template #default=\"{row}\">\n            {{row.isFrontDisplay === 0 ? '否' : '是'}}\n          </template>\n          </el-table-column>\n          <el-table-column\n            label=\"二级目录\"\n            prop=\"twoLevelDirectory\"\n          ></el-table-column>\n          <el-table-column label=\"标签\" prop=\"tags\"></el-table-column>\n          <el-table-column label=\"题目数量\" prop=\"totals\"></el-table-column>\n\n          <el-table-column label=\"操作\" width=\"250px\">\n            <template #default=\"{row}\">\n            <el-button size=\"small\" type=\"text\"  @click=\"$router.push({path:'/subjects/directorys',query:{id:row.id,name:row.subjectName}})\">学科分类</el-button>\n            <el-button size=\"small\" type=\"text\" @click=\"$router.push({path:'/subjects/tags',query:{id:row.id,name:row.subjectName}})\">学科标签</el-button>\n            <el-button size=\"small\" type=\"text\" @click=\"reviseClick(row)\"\n              >修改</el-button\n            >\n            <el-button size=\"small\" type=\"text\" @click=\"removeClick(row)\"\n              >删除</el-button\n            >\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <!-- 弹窗组件 新增--修改 -->\n        <SubjectsAdd\n        ref=\"SubjectsAddRefs\"\n        :visible=\"visible\"\n        :formId =\"formId\"\n        @closeDialog=\"\n        visible = false;\n        getList()\n        \"\n        ></SubjectsAdd>\n\n        <!-- 分页器 -->\n        <el-pagination\n          style=\"text-align:right\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"this.page\"\n          :page-sizes=\"[5, 10, 20, 50]\"\n          :page-size=\"this.pagesize\"\n          :total=\"this.total\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n        >\n        </el-pagination>\n      </el-card>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { list, remove } from '@/api/hmmm/subjects.js' // 接口引入\nimport SubjectsAdd from '../components/subjects-add.vue' // 弹窗组件引入\nimport dayjs from 'dayjs'\nexport default {\n  components: { SubjectsAdd },\n  data () {\n    return {\n      page: 1, // 分页器页码\n      pagesize: 10, // 每页条数\n      total: null, // 总条数\n      list: [], // 从接口处取回\n      title: '', // 头部总条数\n      input: '', // input框\n      visible: false, // 弹窗\n      formId: '', // 子组件回显id\n      // 搜索参数\n      nameData: {\n        subjectName: '',\n        page: 1,\n        pagesize: 10\n      }\n\n    }\n  },\n  async created () {\n    this.getList()\n  },\n  methods: {\n    // 页面列表渲染\n    async getList () {\n      const { data: { items, page, pagesize, counts } } = await list({ page: this.page, pagesize: this.pagesize })\n      // console.log({ items, page, pagesize, counts })\n      // this.lists = data\n      // const res = items.isFrontDisplay === 0 ? '否' : '是'\n      // console.log(res)\n      this.page = +page\n      this.pagesize = +pagesize\n      this.list = items\n      this.title = +counts\n      this.total = +counts\n    },\n    // input框清除\n    emptyInput () {\n      this.input = ''\n    },\n    // 搜索框 并渲染\n    async handleFilter () {\n      // console.log(this.input)\n      this.nameData.subjectName = this.input\n      const { data } = await list(this.nameData)\n      this.list = data.items\n      console.log(data)\n    },\n    // 编辑学科弹窗\n    reviseClick (row) {\n      console.log(row)\n      this.visible = true\n      this.$refs.SubjectsAddRefs.form.subjectName = row.subjectName\n      this.$refs.SubjectsAddRefs.form.isFrontDisplay = row.isFrontDisplay\n      this.formId = row.id\n      this.$refs.SubjectsAddRefs.title = '编辑学科'\n    },\n    // 删除\n    async removeClick (row) {\n      this.$confirm('此操作将永久删除该学科, 是否继续?', '提示', {\n        type: 'warning'\n      }).then(async () => {\n        await remove(row)\n        this.getList()\n        this.$message.success('删除成功')\n      }).catch(() => {\n        this.$message.info('已取消删除')\n      })\n    },\n    // 时间处理\n    formatTime (time, str) {\n      return dayjs(time).format(str)\n    },\n    // 新增学科弹窗\n    newlyAdded () {\n      // console.log(111)\n      this.visible = true\n      this.$refs.SubjectsAddRefs.title = '新增学科'\n    },\n    // 页码\n    handleSizeChange (Val) {\n      this.pagesize = Val\n      this.page = 1\n      if (this.page === 1) {\n        this.getList()\n      }\n    },\n    // 页码发生变化触发的方法\n    handleCurrentChange (Val) {\n      this.page = Val\n      this.getList()\n    }\n\n  }\n}\n</script>\n\n<style scoped></style>\n"]}]}