{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-manage/pages/permissions.vue?vue&type=style&index=1&id=66fd8e47&prod&lang=css&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-manage/pages/permissions.vue","mtime":1668225793868},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/css-loader/dist/cjs.js","mtime":1666491586395},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1666491603796},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/postcss-loader/src/index.js","mtime":1666491592715},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5lbC10YWJsZSB0aCB7CiAgYmFja2dyb3VuZC1jb2xvcjogI2ZhZmFmYTsKfQouZWwtdGFibGUgdGguaXMtbGVhZiB7CiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNlOGU4ZTg7Cn0K"},{"version":3,"sources":["permissions.vue"],"names":[],"mappings":";AAoIA;AACA;AACA;AACA;AACA;AACA","file":"permissions.vue","sourceRoot":"src/module-manage/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <!-- 搜索 -->\n        <el-form :model=\"requestParameters\" ref=\"requestParameters\">\n          <el-form-item prop=\"title\">\n            <el-input\n              @keyup.enter=\"handleFilter\"\n              style=\"width: 200px;\"\n              :placeholder=\"$t('table.search')\"\n              class=\"filter-item\"\n              v-model=\"requestParameters.title\"\n            ></el-input>\n            <el-button\n              class=\"filter-item\"\n              size=\"small\"\n              type=\"primary\"\n              icon=\"el-icon-search\"\n              @click=\"handleFilter\"\n            >{{$t('table.search')}}</el-button>\n            <el-button class=\"filter-item\" size=\"small\" type=\"primary\" @click=\"resetForm\">重置</el-button>\n          </el-form-item>\n          <el-button\n            class=\"filter-item fr\"\n            size=\"small\"\n            style=\"margin-left: 10px;\"\n            @click=\"handleCreate\"\n            type=\"primary\"\n            icon=\"el-icon-edit\"\n          >{{$t('table.permissionNew')}}</el-button>\n        </el-form>\n        <el-alert\n          v-if=\"alertText !== ''\"\n          :title=\"alertText\"\n          type=\"info\"\n          class=\"alert\"\n          :closable=\"false\"\n          show-icon\n        ></el-alert>\n        <!-- end -->\n        <!-- 数据 -->\n        <el-table\n          :key=\"tableKey\"\n          :data=\"dataList\"\n          v-loading=\"listLoading\"\n          element-loading-text=\"给我一点时间\"\n          fit\n          highlight-current-row\n          style=\"width: 100%\"\n          border\n        >\n          <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n          <el-table-column align=\"center\" :label=\"$t('table.username')\">\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.title}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column :label=\"$t('table.date')\" :sort-method=\"changesort\" sortable>\n            <template slot-scope=\"scope\">\n              <span>{{scope.row.create_date | parseTimeByString(\"{y}-{m}-{d}\")}}</span>\n            </template>\n          </el-table-column>\n          <el-table-column\n            align=\"center\"\n            :label=\"$t('table.actions')\"\n            class-name=\"small-padding fixed-width\"\n          >\n            <template slot-scope=\"scope\">\n              <el-button\n                type=\"primary\"\n                size=\"mini\"\n                @click=\"handleUpdate(scope.row.id)\"\n              >{{$t('table.edit')}}</el-button>\n              <el-button\n                v-if=\"scope.row.status!='deleted'\"\n                size=\"mini\"\n                type=\"danger\"\n                @click=\"removeUser(scope.row.id)\"\n              >{{$t('table.delete')}}</el-button>\n              <!-- 高级接口授权 -->\n              <!-- <el-button size=\"mini\" type=\"primary\" @click=\"handleApiSet(scope.row.id)\" style=\"width:auto\">{{$t('table.imdsAi')}}\n              </el-button>-->\n            </template>\n          </el-table-column>\n        </el-table>\n        <!-- end -->\n        <!-- 分页 -->\n        <div class=\"pagination\">\n          <PageTool\n            :paginationPage=\"requestParameters.page\"\n            :paginationPagesize=\"requestParameters.pagesize\"\n            :total=\"total\"\n            @pageChange=\"handleCurrentChange\"\n            @pageSizeChange=\"handleSizeChange\"\n          ></PageTool>\n        </div>\n        <!-- end -->\n        <!-- 新增标签弹层 -->\n        <component\n          v-bind:is=\"PermissionsAdd\"\n          ref=\"editPermission\"\n          :formData.sync=\"requestParameters\"\n          :text=\"text\"\n          :pageTitle=\"pageTitle\"\n          :ruleInline=\"ruleInline\"\n          v-on:newDataes=\"handleLoadDataList\"\n          v-on:handleCloseModal=\"handleCloseModal\"\n        ></component>\n        <!-- 高级接口权限弹层 -->\n        <!-- <component v-bind:is=\"permissionsApiAdd\"\n          :apiTitle='apiTitle'\n          ref=\"editPermissionApi\"\n          :formData.sync='requestParameters'\n          :ruleInline='ruleInline'\n          v-on:handleCloseModal=\"handleCloseModal\">\n        </component>-->\n      </el-card>\n    </div>\n  </div>\n</template>\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n.alert {\n  margin: 10px 0px;\n}\n.pagination {\n  margin-top: 10px;\n  // text-align: right;\n}\n</style>\n\n<style>\n.el-table th {\n  background-color: #fafafa;\n}\n.el-table th.is-leaf {\n  border-bottom: 2px solid #e8e8e8;\n}\n</style>\n<script>\nimport { list, remove, detail, update, add } from '@/api/base/permissions'\nimport PageTool from './../components/page-tool'\nimport PermissionsAdd from './../components/permissions-add'\n// import permissionsApiAdd from './../components/permissionsApi-add'\nexport default {\n  name: 'base-permissions',\n  components: {\n    PermissionsAdd,\n    // permissionsApiAdd,\n    PageTool\n  },\n  data () {\n    return {\n      PermissionsAdd: 'PermissionsAdd',\n      permissionsApiAdd: 'permissionsApiAdd',\n      pageTitle: '权限组', // 页面标题\n      text: '', // 新增、编辑文本\n      apiTitle: '高级接口授权',\n      tableKey: 0,\n      dataList: [],\n      total: null,\n      listLoading: true,\n      dialogStatus: '',\n      alertText: '',\n      requestParameters: {\n        page: 1,\n        pagesize: 10,\n        title: this.title\n      },\n      // formBase: {\n      //   id: 0,\n      //   title: '',\n      //   permissions: []\n      // },\n      // formData: {\n      //   id: 0,\n      //   create_date: '',\n      //   title: '',\n      //   permissions: []\n      // },\n      ruleInline: {\n        // 表单验证\n        title: [{ required: true, message: '用户名不能为空', trigger: 'blur' }]\n      }\n    }\n  },\n  computed: {},\n  methods: {\n    // 获取列表数据\n    getList (params) {\n      this.listLoading = true\n      list(this.requestParameters)\n        .then(data => {\n          this.dataList = data.data.list\n          this.total = data.data.counts\n          this.alertText = `共 ${this.total} 条记录`\n          this.listLoading = false\n        })\n        .catch(e => {\n          this.$message.e('错了哦，这是一条错误消息')\n        })\n    },\n    // 数据排序\n    changesort (a, b) {\n      const oldTime = new Date(a.date).getTime() / 1000\n      const newime = new Date(b.date).getTime() / 1000\n      if (oldTime - newime > 0) {\n        return true\n      } else {\n        return false\n      }\n    },\n    // 重置\n    resetForm () {\n      this.$refs.requestParameters.resetFields()\n    },\n    // 搜索信息\n    handleFilter () {\n      this.requestParameters.page = 1\n      this.getList(this.requestParameters)\n    },\n    // 每页显示信息条数\n    handleSizeChange (val) {\n      this.requestParameters.pagesize = val\n      if (this.requestParameters.page === 1) {\n        this.getList(this.requestParameters)\n      }\n    },\n    // 进入某一页\n    handleCurrentChange (val) {\n      this.requestParameters.page = val\n      this.getList()\n    },\n    // 新增用户刷新列表\n    handleLoadDataList () {\n      this.getList()\n    },\n    // **********************************\n    // 新增用户\n    handleCreate () {\n      this.text = '创建'\n      this.$refs.editPermission.handleResetForm()\n      this.$refs.editPermission.dialogFormV()\n    },\n    // 窗口操作**********************************\n    // 弹框关闭\n    handleCloseModal () {\n      this.$refs.editPermission.dialogFormH()\n    },\n    // 编辑\n    handleUpdate (objeditId) {\n      var _this = this\n      this.text = '编辑'\n      this.$refs.editPermission.dialogFormV()\n      this.$refs.editPermission.hanldeEditForm(objeditId)\n    },\n    // 删除\n    removeUser (user) {\n      this.$confirm('此操作将永久删除用户 ' + ', 是否继续?', '提示', {\n        type: 'warning'\n      })\n        .then(() => {\n          remove({ id: user })\n            .then(response => {\n              this.$message.success('成功删除了用户' + '!')\n              this.dataList.splice(user, 1)\n              this.getList(this.requestParameters)\n            })\n            .catch(response => {\n              this.$message.error('删除失败!')\n            })\n        })\n        .catch(() => {\n          this.$message.info('已取消操作!')\n        })\n    },\n    // 高级接口权限\n\n    handleApiSet (objeditId) {\n      this.$refs.editPermissionApi.dialogFormV()\n    }\n  },\n  // 挂载结束\n  mounted: function () {},\n  // 创建完毕状态\n  created () {\n    this.getList()\n    // 键盘enter操作\n    var lett = this\n    document.onkeydown = function (e) {\n      var key = window.event.keyCode\n      if (key === 13) {\n        lett.handleFilter(this.requestParameters)\n      }\n    }\n  },\n  // 组件更新\n  updated: function () {}\n}\n</script>\n"]}]}