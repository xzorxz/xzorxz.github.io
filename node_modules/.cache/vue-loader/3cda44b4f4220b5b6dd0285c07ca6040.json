{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/questions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/questions.vue","mtime":1668475987752},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGxpc3QsIHJlbW92ZSwgZGV0YWlsLCBjaG9pY2VBZGQgfSBmcm9tICdAL2FwaS9obW1tL3F1ZXN0aW9ucy5qcycKaW1wb3J0IHsgZGlmZmljdWx0eSwgcXVlc3Rpb25UeXBlIH0gZnJvbSAnQC9hcGkvaG1tbS9jb25zdGFudHMuanMnCmltcG9ydCBxdWVzdGlvbnMgZnJvbSAnQC9tb2R1bGUtaG1tbS9jb21wb25lbnRzL3F1ZXN0aW9ucycKaW1wb3J0IE15Zm9ybSBmcm9tICcuL2NvbXBhbnlzL3F1ZXN0aW9ucy1jaG9pY2UtZm9ybXMudnVlJwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgcXVlc3Rpb25zLAogICAgTXlmb3JtCiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhYmxlRGF0YTogW10sIC8vIOWIl+ihqOaVsOaNrgogICAgICBkaWZmaWN1bHR5LCAvLyDlm7Dpmr4KICAgICAgcXVlc3Rpb25UeXBlLCAvLyDor5XpopjnsbvlnosKICAgICAgaXNTaG93RGlhbG9nOiBmYWxzZSwKICAgICAgbGlzdDoge30sIC8vIOmihOiniOW8ueeql+aVsOaNrgogICAgICBRdWVMaXN0OiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBwYWdlc2l6ZTogNSwKICAgICAgICB0b3RhbDogMSwKICAgICAgICBjb3VudHM6IDAKICAgICAgfSwKICAgICAgZGF0YWxpc3Q6IHsKICAgICAgICBzdWJqZWN0SUQ6IG51bGwsIC8vIOWtpuenkQogICAgICAgIHRhZ3M6IG51bGwsIC8vIOagh+etvuWQjeensAogICAgICAgIGtleXdvcmQ6IG51bGwsIC8vIOWFs+mUruWtlwogICAgICAgIHF1ZXN0aW9uVHlwZTogbnVsbCwgLy8g6K+V6aKY57G75Z6LCiAgICAgICAgY2l0eTogbnVsbCwgLy8g5LyB5Lia5Z+O5biCCiAgICAgICAgc2hvcnROYW1lOiBudWxsLCAvLyDkvIHkuJrnroDnp7AKICAgICAgICByZW1hcmtzOiBudWxsLCAvLyDpopjnm67lpIfms6gKICAgICAgICBjcmVhdG9ySUQ6IG51bGwsIC8vIOW9leWFpeS6ugogICAgICAgIGRpZmZpY3VsdHk6IG51bGwsIC8vIOmavuW6pgogICAgICAgIGRpcmVjdGlvbjogbnVsbCwgLy8g5pa55ZCRCiAgICAgICAgY2F0YWxvZ0lEOiBudWxsLCAvLyDnm67lvZUKICAgICAgICBwYWdlOiAxLAogICAgICAgIHB1Ymxpc2hTdGF0ZTogbnVsbCwKICAgICAgICBwYWdlc2l6ZTogNSwKICAgICAgICBjaGtTdGF0ZTogJ2FsbCcsCiAgICAgICAgcHJvdkFuZENpdHk6IHsKICAgICAgICAgIHByb3ZpbmNlOiAnJywKICAgICAgICAgIGNpdHk6ICcnCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0TGlzdCgpCiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmr4/pobXmnaHmlbDlj5HnlJ/lj5jljJYKICAgIGhhbmRsZVNpemVDaGFuZ2UgKHZhbCkgewogICAgICB0aGlzLlF1ZUxpc3QucGFnZXNpemUgPSB2YWwKICAgICAgdGhpcy5RdWVMaXN0LnBhZ2UgPSAxCiAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgLy8g5b2T5YmN6aG156CB5Y+R55Sf5Y+Y5YyWCiAgICBoYW5kbGVDdXJyZW50Q2hhbmdlICh2YWwpIHsKICAgICAgdGhpcy5RdWVMaXN0LnBhZ2UgPSB2YWwKICAgICAgdGhpcy5nZXRMaXN0KCkKICAgIH0sCiAgICAvLyDmlrDlop7or5Xpopjot7PovawKICAgIGhhbmRsZU5ldyAoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcXVlc3Rpb25zL25ldycpCiAgICB9LAogICAgLy8g5L+u5pS5CiAgICBoYW5kbGVFZGl0IChpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL3F1ZXN0aW9ucy9uZXcvP2lkPSR7aWR9YCkKICAgIH0sCiAgICAvLyDojrflj5bliJfooajmlbDmja4KICAgIGFzeW5jIGdldExpc3QgKCkgeyAvLyBjb3VudHMsIHBhZ2UsIHBhZ2VzLCBwYWdlc2l6ZSAgdGhpcy5wYWdlLCB0aGlzLnNpemUKICAgICAgY29uc3QgeyBkYXRhOiB7IGl0ZW1zLCBjb3VudHMsIHBhZ2UsIHBhZ2VzaXplIH0gfSA9IGF3YWl0IGxpc3QodGhpcy5RdWVMaXN0KQogICAgICBjb25zb2xlLmxvZyhpdGVtcywgY291bnRzLCBwYWdlLCBwYWdlc2l6ZSkKICAgICAgdGhpcy50YWJsZURhdGEgPSBpdGVtcwogICAgICB0aGlzLlF1ZUxpc3QuY291bnRzID0gY291bnRzCiAgICAgIHRoaXMuUXVlTGlzdC50b3RhbCA9IGNvdW50cwogICAgICB0aGlzLlF1ZUxpc3QucGFnZSA9ICtwYWdlCiAgICAgIHRoaXMuUXVlTGlzdC5wYWdlc2l6ZSA9IE51bWJlcihwYWdlc2l6ZSkKICAgIH0sCiAgICAvLyDliKDpmaQKICAgIGFzeW5jIHJlbW92ZUxpc3QgKGlkKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOaUueinkuiJsiwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIGF3YWl0IHJlbW92ZSh7IGlkIH0pCiAgICAgICAgaWYgKHRoaXMudGFibGVEYXRhLmxlbmd0aCA9PT0gMSAmJiB0aGlzLlF1ZUxpc3QucGFnZSA+IDEpIHsKICAgICAgICAgIHRoaXMuUXVlTGlzdC5wYWdlLS0KICAgICAgICB9CiAgICAgICAgdGhpcy5nZXRMaXN0KCkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UuaW5mbygn5bey5Y+W5raI5Yig6ZmkJykKICAgICAgfSkKICAgIH0sCiAgICAvLyDpooTop4gKICAgIGFzeW5jIGhhbmRsZVByZXZpZXcgKGlkKSB7CiAgICAgIHRoaXMuaXNTaG93RGlhbG9nID0gdHJ1ZQogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGRldGFpbCh7IGlkIH0pCiAgICAgIGNvbnNvbGUubG9nKGRhdGEpCiAgICAgIGNvbnNvbGUubG9nKGlkKQogICAgICB0aGlzLmxpc3QgPSBkYXRhCiAgICB9LAogICAgLy8g5Yqg5YWl57K+6YCJ6aKY5bqTCiAgICBoYW5kbGVBZGQgKGlkKSB7CiAgICAgIGNvbnNvbGUubG9nKCfngrnlh7snLCB7IGlkIH0pCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuaUuemimOebruWKoOWFpeeyvumAiSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGlkKQogICAgICAgIGF3YWl0IGNob2ljZUFkZCh7IGlkLCBjaG9pY2VTdGF0ZTogMSB9KQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yqg5YWl57K+6YCJ6aKY5bqT5oiQ5YqfJykKICAgICAgICB0aGlzLmdldExpc3QoKQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcXVlc3Rpb25zL2Nob2ljZScpCiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmluZm8oJ+W3suWPlua2iOWKoOWFpScpCiAgICAgIH0pCiAgICB9LAogICAgLy8g5pCc57SiCiAgICBhc3luYyBzdWJtaXQgKCkgewogICAgICBjb25zdCBsaW4gPSB0aGlzLiRyZWZzLmZvcm1EYXRhLmRhdGFsaXN0CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhOiB7IGNvdW50cywgaXRlbXMsIHBhZ2VzaXplIH0KICAgICAgfSA9IGF3YWl0IGxpc3QobGluKQogICAgICBjb25zb2xlLmxvZyh7IGNvdW50cywgaXRlbXMsIHBhZ2VzaXplIH0pCiAgICAgIHRoaXMudGFibGVEYXRhID0gaXRlbXMKICAgICAgdGhpcy5RdWVMaXN0LnRvdGFsID0gY291bnRzCiAgICAgIHRoaXMuUXVlTGlzdC5wYWdlc2l6ZSA9ICtwYWdlc2l6ZQogICAgfQogIH0KfQo="},{"version":3,"sources":["questions.vue"],"names":[],"mappings":";AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"questions.vue","sourceRoot":"src/module-hmmm/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <!-- 按钮 -->\n        <el-row>\n          <el-col :span=\"20\">\n            <span style=\"color: #ffcedb\">说明：目前支持学科和关键字渲染</span>\n          </el-col>\n          <el-col :span=\"4\">\n            <div style=\"margin-left: 78px\">\n              <el-button type=\"success\" icon=\"el-icon-edit\" size=\"small\" @click=\"handleNew\" style=\"margin-left: 18px; margin-bottom: 15px\">新增试题</el-button>\n            </div>\n          </el-col>\n        </el-row>\n        <!-- 筛选区域 -->\n        <Myform :datalist=\"datalist\" ref=\"formData\" @Submit=\"submit\" ></Myform>\n        <!-- 提示框 -->\n        <el-alert :title=\"`数据一共 ${this.QueList.total} 条`\" show-icon :closable=\"false\">\n        </el-alert>\n        <!-- 表格 -->\n        <el-table :data=\"tableData\" style=\"width: 100%; margin-top: 10px\">\n          <el-table-column label=\"试题编号\"   prop=\"number\"> </el-table-column>\n          <el-table-column label=\"学科\" prop=\"subject\"> </el-table-column>\n          <el-table-column label=\"目录\"  prop=\"catalog\"> </el-table-column>\n          <el-table-column label=\"题型\"  prop=\"questionType\" >\n            <template #default=\"{row}\">\n              {{ questionType.find(item => item.value === +row.questionType).label}}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"题干\"  prop=\"question\">\n            <template #default=\"{row}\">\n              <div v-html=\"row.question\"></div>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"录入时间\"  prop=\"addDate\">\n            <template #default=\"{row}\">\n              {{ row.addDate.slice(0, row.addDate.indexOf('T')) }}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"难度\"  prop=\"difficulty\">\n            <template #default=\"{ row }\">\n              {{ difficulty.find(item => item.value === +row.difficulty).label}}\n            </template>\n          </el-table-column>\n          <el-table-column label=\"录入人\" width=\"180\" prop=\"creator\"> </el-table-column>\n          <el-table-column label=\"操作\" width=\"200\">\n            <template #default=\"{row}\">\n              <el-button type=\"primary\" icon=\"el-icon-view\" title=\"预览\" circle @click=\"handlePreview(row.id)\"></el-button>\n              <el-button type=\"primary\" icon=\"el-icon-edit\" title=\"修改\" circle @click=\"handleEdit(row.id)\"></el-button>\n              <el-button type=\"danger\" icon=\"el-icon-delete\" title=\"删除\" circle @click.native=\"removeList(row.id)\"></el-button>\n              <el-button type=\"warning\" icon=\"el-icon-check\" title=\"加入精选\" circle @click=\"handleAdd(row.id)\"></el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n        <!-- 分页  :total=\"total\"  -->\n        <div style=\"margin-top: 10px; text-align: right\">\n          <el-pagination\n            @size-change=\"handleSizeChange\"\n            @current-change=\"handleCurrentChange\"\n            :current-page=\"this.QueList.page\"\n            :page-sizes=\"[5, 10, 20, 50]\"\n            :page-size=\"this.QueList.pagesize\"\n            :total=\"this.QueList.total\"\n            layout=\"total, prev, pager, next, sizes, jumper\"\n          >\n          </el-pagination>\n        </div>\n      </el-card>\n      <!-- 预览弹框 -->\n      <questions :isShowDialog.sync=\"isShowDialog\" :list=\"list\"></questions>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { list, remove, detail, choiceAdd } from '@/api/hmmm/questions.js'\nimport { difficulty, questionType } from '@/api/hmmm/constants.js'\nimport questions from '@/module-hmmm/components/questions'\nimport Myform from './companys/questions-choice-forms.vue'\nexport default {\n  components: {\n    questions,\n    Myform\n  },\n  data () {\n    return {\n      tableData: [], // 列表数据\n      difficulty, // 困难\n      questionType, // 试题类型\n      isShowDialog: false,\n      list: {}, // 预览弹窗数据\n      QueList: {\n        page: 1,\n        pagesize: 5,\n        total: 1,\n        counts: 0\n      },\n      datalist: {\n        subjectID: null, // 学科\n        tags: null, // 标签名称\n        keyword: null, // 关键字\n        questionType: null, // 试题类型\n        city: null, // 企业城市\n        shortName: null, // 企业简称\n        remarks: null, // 题目备注\n        creatorID: null, // 录入人\n        difficulty: null, // 难度\n        direction: null, // 方向\n        catalogID: null, // 目录\n        page: 1,\n        publishState: null,\n        pagesize: 5,\n        chkState: 'all',\n        provAndCity: {\n          province: '',\n          city: ''\n        }\n      }\n    }\n  },\n  created () {\n    this.getList()\n  },\n  methods: {\n    // 每页条数发生变化\n    handleSizeChange (val) {\n      this.QueList.pagesize = val\n      this.QueList.page = 1\n      this.getList()\n    },\n    // 当前页码发生变化\n    handleCurrentChange (val) {\n      this.QueList.page = val\n      this.getList()\n    },\n    // 新增试题跳转\n    handleNew () {\n      this.$router.push('/questions/new')\n    },\n    // 修改\n    handleEdit (id) {\n      this.$router.push(`/questions/new/?id=${id}`)\n    },\n    // 获取列表数据\n    async getList () { // counts, page, pages, pagesize  this.page, this.size\n      const { data: { items, counts, page, pagesize } } = await list(this.QueList)\n      console.log(items, counts, page, pagesize)\n      this.tableData = items\n      this.QueList.counts = counts\n      this.QueList.total = counts\n      this.QueList.page = +page\n      this.QueList.pagesize = Number(pagesize)\n    },\n    // 删除\n    async removeList (id) {\n      this.$confirm('此操作将永久删除改角色, 是否继续?', '提示', {\n        type: 'warning'\n      }).then(async () => {\n        await remove({ id })\n        if (this.tableData.length === 1 && this.QueList.page > 1) {\n          this.QueList.page--\n        }\n        this.getList()\n      }).catch(() => {\n        this.$message.info('已取消删除')\n      })\n    },\n    // 预览\n    async handlePreview (id) {\n      this.isShowDialog = true\n      const { data } = await detail({ id })\n      console.log(data)\n      console.log(id)\n      this.list = data\n    },\n    // 加入精选题库\n    handleAdd (id) {\n      console.log('点击', { id })\n      this.$confirm('此操作将改题目加入精选, 是否继续?', '提示', {\n        type: 'warning'\n      }).then(async () => {\n        console.log(id)\n        await choiceAdd({ id, choiceState: 1 })\n        this.$message.success('加入精选题库成功')\n        this.getList()\n        this.$router.push('/questions/choice')\n      }).catch(() => {\n        this.$message.info('已取消加入')\n      })\n    },\n    // 搜索\n    async submit () {\n      const lin = this.$refs.formData.datalist\n      const {\n        data: { counts, items, pagesize }\n      } = await list(lin)\n      console.log({ counts, items, pagesize })\n      this.tableData = items\n      this.QueList.total = counts\n      this.QueList.pagesize = +pagesize\n    }\n  }\n}\n</script>\n\n<style scoped></style>\n"]}]}