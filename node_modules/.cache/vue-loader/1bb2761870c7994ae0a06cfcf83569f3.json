{"remainingRequest":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/directorys.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/src/module-hmmm/pages/directorys.vue","mtime":1668475987749},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/babel-loader/lib/index.js","mtime":1667719626894},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/cache-loader/dist/cjs.js","mtime":1666491533034},{"path":"/Users/xiaozhang/学习/就业班学习/vue-实战/hmmm-frontend-dev/node_modules/vue-loader/lib/index.js","mtime":1666491603796}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkYXlqcyBmcm9tICdkYXlqcycKaW1wb3J0IHsgbGlzdCwgcmVtb3ZlLCBjaGFuZ2VTdGF0ZSB9IGZyb20gJ0AvYXBpL2htbW0vZGlyZWN0b3J5cycKaW1wb3J0IERpcmVjdG9yeUFkZCBmcm9tICcuLy4uL2NvbXBvbmVudHMvZGlyZWN0b3J5cy1hZGQnCi8vIGltcG9ydCB7IGxpc3QgYXMgZ2V0Q29tcGFueXMgfSBmcm9tICdAL2FwaS9obW1tL2NvbXBhbnlzJwovLyBpbXBvcnQgeyBsaXN0IGFzIGdldFF1ZXN0aW9uIH0gZnJvbSAnQC9hcGkvaG1tbS9xdWVzdGlvbnMnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0RpcmVjdG9yeXMnLAogIGNvbXBvbmVudHM6IHsKICAgIERpcmVjdG9yeUFkZAogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBkaXJlY3RvcnlzUXVlcnk6IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICBkaXJlY3RvcnlOYW1lOiBudWxsLAogICAgICAgIHN0YXRlOiBudWxsLAogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgcGFnZXNpemU6IDEwCiAgICAgIH0sIC8vIOebruW9leWIl+ihqOaVsOaNrgogICAgICB0YWJsZURhdGE6IFtdLCAvLyDooajljZXmuLLmn5PmlbDmja4KICAgICAgdG90YWw6IDAsIC8vIOaAu+adoeaVsAogICAgICBkYXlqcywKICAgICAgdmlzaWJsZTogZmFsc2UsIC8vIOW8ueeqlwogICAgICBmb3JtRGF0YTogewogICAgICAgIGlkOiBudWxsLAogICAgICAgIGRpcmVjdG9yeU5hbWU6IG51bGwsCiAgICAgICAgc3ViamVjdElEOiBudWxsCiAgICAgIH0KCiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0RGlyZWN0b3J5c0xpc3QoKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5paw5aKe5by556qXCiAgICBoYW5kbGVPcGVuICgpIHsKICAgICAgY29uc29sZS5sb2coMTExKQogICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJHJlZnMuZGlyZWN0b3J5QWRkLnRpdGxlID0gJ+aWsOWinuebruW9lScKICAgIH0sCiAgICAvLyDkv67mlLnlvLnnqpcKICAgIGhhbmRsZUVkaXQgKHZhbCkgewogICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuZm9ybURhdGEgPSB2YWwKICAgICAgLy8g5Zue5pi+CiAgICAgIC8vIHRoaXMuJHJlZnMuZGlyZWN0b3J5QWRkLmRpYWxvZ0Zvcm0uaWQgPSB2YWwuaWQKICAgICAgdGhpcy4kcmVmcy5kaXJlY3RvcnlBZGQuZGlhbG9nRm9ybS5zdWJqZWN0SUQgPSB2YWwuc3ViamVjdElECiAgICAgIHRoaXMuJHJlZnMuZGlyZWN0b3J5QWRkLmRpYWxvZ0Zvcm0uZGlyZWN0b3J5TmFtZSA9IHZhbC5kaXJlY3RvcnlOYW1lCiAgICAgIGNvbnNvbGUubG9nKHZhbCkKICAgICAgdGhpcy4kcmVmcy5kaXJlY3RvcnlBZGQudGl0bGUgPSAn5L+u5pS555uu5b2VJwogICAgfSwKICAgIC8vIOemgeeUqC/lkK/nlKjovazmjaIKICAgIGFzeW5jIGhhbmRsZUNoYW5nZSAodmFsKSB7CiAgICAgIGF3YWl0IGNoYW5nZVN0YXRlKHsKICAgICAgICBpZDogdmFsLmlkLAogICAgICAgIHN0YXRlOiB2YWwuc3RhdGUgPT09IDEgPyAwIDogMQogICAgICB9KQogICAgICBjb25zb2xlLmxvZyh2YWwuaWQsIHZhbC5zdGF0ZSkKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliIfmjaLmiJDlip8nKQogICAgICB2YWwuc3RhdGUgPSB2YWwuc3RhdGUgPT09IDEgPyAwIDogMQogICAgfSwKICAgIC8vIOWIoOmZpAogICAgaGFuZGxlRGVsICh2YWwpIHsKICAgICAgLy8gY29uc29sZS5sb2coMSkKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5paH5Lu2LCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIH0pCiAgICAgICAgLnRoZW4oYXN5bmMgKCkgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnCiAgICAgICAgICB9KQogICAgICAgICAgYXdhaXQgcmVtb3ZlKHZhbCkKICAgICAgICAgIHRoaXMuZ2V0RGlyZWN0b3J5c0xpc3QoKQogICAgICAgIH0pCiAgICAgICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICB9LAogICAgLy8g5riF56m66KGo5Y2VCiAgICBjbGVhciAoKSB7CiAgICAgIHRoaXMuZGlyZWN0b3J5c1F1ZXJ5ID0gewogICAgICAgIGRpcmVjdG9yeU5hbWU6ICcnLAogICAgICAgIHN0YXRlOiAnJywKICAgICAgICBwYWdlOiAxLAogICAgICAgIHBhZ2VzaXplOiA1CiAgICAgIH0KICAgICAgdGhpcy5nZXREaXJlY3RvcnlzTGlzdCgpCiAgICB9LAogICAgLy8g6L+b6KGM5p+l6K+iCiAgICBvblNlYXJjaCAoKSB7CiAgICAgIHRoaXMuZGlyZWN0b3J5c1F1ZXJ5LnBhZ2UgPSAxCiAgICAgIHRoaXMuZ2V0RGlyZWN0b3J5c0xpc3QoKQogICAgfSwKICAgIC8vIOa4suafk+WIl+ihqAogICAgYXN5bmMgZ2V0RGlyZWN0b3J5c0xpc3QgKCkgewogICAgICBpZiAodGhpcy4kcm91dGUucXVlcnkuaWQpIHsKICAgICAgICB0aGlzLmZvcm1EYXRhLnN1YmplY3RJRCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmlkCiAgICAgICAgdGhpcy5mb3JtRGF0YS5zdWJqZWN0TmFtZSA9IHRoaXMuJHJvdXRlLnF1ZXJ5Lm5hbWUKICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGxpc3QodGhpcy5mb3JtRGF0YSkKICAgICAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5pdGVtcwogICAgICAgIHRoaXMudG90YWwgPSBkYXRhLmNvdW50cwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgbGlzdCh0aGlzLmRpcmVjdG9yeXNRdWVyeSkKICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKQogICAgICAgIHRoaXMudGFibGVEYXRhID0gZGF0YS5pdGVtcwogICAgICAgIHRoaXMudG90YWwgPSBkYXRhLmNvdW50cwogICAgICB9CiAgICB9LAogICAgLy8g5YiG6aG1CiAgICBoYW5kbGVTaXplQ2hhbmdlIChzaXplKSB7CiAgICAgIHRoaXMuZGlyZWN0b3J5c1F1ZXJ5LnBhZ2UgPSAxCiAgICAgIHRoaXMuZGlyZWN0b3J5c1F1ZXJ5LnBhZ2VzaXplID0gc2l6ZQogICAgICB0aGlzLmdldERpcmVjdG9yeXNMaXN0KCkKICAgIH0sCiAgICAvLyDliIfmjaLpobXpnaIKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UgKHBhZ2UpIHsKICAgICAgdGhpcy5kaXJlY3RvcnlzUXVlcnkucGFnZSA9IHBhZ2UKICAgICAgdGhpcy5nZXREaXJlY3RvcnlzTGlzdCgpCiAgICB9LAogICAgLy8g5pu05paw5YiX6KGoCiAgICB1cGRhdGVMaXN0ICgpIHsKICAgICAgdGhpcy5kaXJlY3RvcnlzUXVlcnkucGFnZSA9IDEKICAgICAgdGhpcy5nZXREaXJlY3RvcnlzTGlzdCgpCiAgICB9CiAgICAvLyDoh6rlrprkuYnntKLlvJXliJcKICAgIC8vIGluZGV4TWV0aG9kIChpbmRleCkgewogICAgLy8gICByZXR1cm4gaW5kZXggKyAxICsgKHRoaXMucGFnZSAtIDEpICogdGhpcy5zaXplCiAgICAvLyB9CiAgfQp9Cg=="},{"version":3,"sources":["directorys.vue"],"names":[],"mappings":";AAqJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"directorys.vue","sourceRoot":"src/module-hmmm/pages","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <div class=\"app-container\">\n      <el-card shadow=\"never\">\n        <!-- 面包屑 -->\n        <div style=\"border-bottom: 2px solid #f4f4f5; margin-bottom: 15px\">\n          <el-breadcrumb\n            separator-class=\"el-icon-arrow-right\"\n            style=\"margin-bottom: 15px\"\n          >\n            <el-breadcrumb-item>学科管理</el-breadcrumb-item>\n            <el-breadcrumb-item>目录管理</el-breadcrumb-item>\n          </el-breadcrumb>\n        </div>\n        <!-- end -->\n        <!-- 目录管理 -->\n        <!-- 搜索 -->\n        <el-form\n          :inline=\"true\"\n          :model=\"directorysQuery\"\n          class=\"demo-form-inline\"\n        >\n          <el-form-item label=\"目录名称\">\n            <el-input\n              v-model=\"directorysQuery.directoryName\"\n              @keyup.enter=\"onSearch\"\n            ></el-input>\n          </el-form-item>\n          <el-form-item label=\"状态\">\n            <el-select v-model=\"directorysQuery.state\" placeholder=\"请选择\">\n              <el-option label=\"启用\" :value=\"1\"></el-option>\n              <el-option label=\"禁用\" :value=\"0\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item>\n            <el-button @click=\"clear\">清除</el-button>\n            <el-button type=\"primary\" @click=\"onSearch\">搜索</el-button>\n          </el-form-item>\n          <!-- <el-form-item style=\"padding-left: 640px; color: #409EFF;\">\n            <span><i class=\"el-icon-back\"></i>返回学科</span>\n          </el-form-item> -->\n          <el-button\n            class=\"filter-item fr\"\n            style=\"margin-left: 10px\"\n            type=\"success\"\n            icon=\"el-icon-edit\"\n            @click=\"handleOpen\"\n            >新增目录</el-button\n          >\n          <!-- {{$t('table.directorysNew')}} -->\n        </el-form>\n\n        <el-alert :title=\"`数据一共${total}条`\" type=\"info\" show-icon>\n        </el-alert>\n        <!-- end -->\n\n        <!-- 数据 -->\n        <el-table :data=\"tableData\" style=\"width: 100%\">\n          <el-table-column type=\"index\" label=\"序号\">\n            <!-- <template #default=\"scope\">\n              <div>\n                {{ (page.page - 1) * page.limit + scope.$index + 1 }}\n              </div>\n            </template> -->\n          </el-table-column>\n          <el-table-column prop=\"subjectName\" label=\"所属学科\" >\n          </el-table-column>\n          <el-table-column prop=\"directoryName\" label=\"目录名称\" >\n          </el-table-column>\n          <el-table-column\n            prop=\"username\"\n            label=\"创建者\"\n            width=\"180\"\n          ></el-table-column>\n          <el-table-column prop=\"addDate\" label=\"创建日期\" >\n            <template #default=\"{ row }\">\n              {{ dayjs(row.addDate).format(\"YYYY-MM-DD hh:mm\") }}\n            </template>\n          </el-table-column>\n          <el-table-column\n            prop=\"totals\"\n            label=\"面试题数量\"\n            width=\"100\"\n          ></el-table-column>\n          <el-table-column prop=\"state\" label=\"状态\">\n            <template #default=\"{ row }\">\n              {{ row.state === 1 ? \"已启用\" : \"已禁用\" }}\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"\" label=\"操作\" width=\"150px\">\n            <template #default=\"{ row }\">\n              <el-link\n                :underline=\"false\"\n                type=\"primary\"\n                style=\"padding-right: 10px\"\n                @click=\"handleChange(row)\"\n              >\n                {{ row.state === 0 ? \"启用\" : \"禁用\" }}\n              </el-link>\n              <el-link\n                :underline=\"false\"\n                type=\"info\"\n                :disabled=\"row.state === 0\"\n                style=\"padding-right: 10px\"\n                @click=\"handleEdit(row)\"\n                >修改</el-link\n              >\n              <!-- {{row}} -->\n              <el-link\n                :underline=\"false\"\n                type=\"info\"\n                :disabled=\"row.state === 0\"\n                @click=\"handleDel(row)\"\n                >删除</el-link\n              >\n            </template>\n          </el-table-column>\n        </el-table>\n        <!-- end -->\n\n        <!-- 分页 -->\n\n        <el-pagination\n          style=\"margin-top: 20px; text-align: right\"\n          layout=\"prev, pager, next, sizes, jumper\"\n          :total=\"total\"\n          :page-sizes=\"[5, 10, 15, 20]\"\n          :page-size.sync=\"directorysQuery.pagesize\"\n          :current-page.sync=\"directorysQuery.page\"\n          @current-change=\"handleCurrentChange\"\n          @size-change=\"handleSizeChange\"\n        ></el-pagination>\n        <!-- end -->\n      </el-card>\n\n      <!-- 新增弹窗 -->\n      <DirectoryAdd\n      ref=\"directoryAdd\"\n      :visible=\"visible\"\n      :formData=\"formData\"\n      @closeDialog=\"visible = false\"\n      @updateList=\"updateList()\"\n      ></DirectoryAdd>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport dayjs from 'dayjs'\nimport { list, remove, changeState } from '@/api/hmmm/directorys'\nimport DirectoryAdd from './../components/directorys-add'\n// import { list as getCompanys } from '@/api/hmmm/companys'\n// import { list as getQuestion } from '@/api/hmmm/questions'\n\nexport default {\n  name: 'Directorys',\n  components: {\n    DirectoryAdd\n  },\n  data () {\n    return {\n      directorysQuery: {\n        id: null,\n        directoryName: null,\n        state: null,\n        page: 1,\n        pagesize: 10\n      }, // 目录列表数据\n      tableData: [], // 表单渲染数据\n      total: 0, // 总条数\n      dayjs,\n      visible: false, // 弹窗\n      formData: {\n        id: null,\n        directoryName: null,\n        subjectID: null\n      }\n\n    }\n  },\n  async created () {\n    this.getDirectorysList()\n  },\n  methods: {\n    // 新增弹窗\n    handleOpen () {\n      console.log(111)\n      this.visible = true\n      this.$refs.directoryAdd.title = '新增目录'\n    },\n    // 修改弹窗\n    handleEdit (val) {\n      this.visible = true\n      this.formData = val\n      // 回显\n      // this.$refs.directoryAdd.dialogForm.id = val.id\n      this.$refs.directoryAdd.dialogForm.subjectID = val.subjectID\n      this.$refs.directoryAdd.dialogForm.directoryName = val.directoryName\n      console.log(val)\n      this.$refs.directoryAdd.title = '修改目录'\n    },\n    // 禁用/启用转换\n    async handleChange (val) {\n      await changeState({\n        id: val.id,\n        state: val.state === 1 ? 0 : 1\n      })\n      console.log(val.id, val.state)\n      this.$message.success('切换成功')\n      val.state = val.state === 1 ? 0 : 1\n    },\n    // 删除\n    handleDel (val) {\n      // console.log(1)\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n        .then(async () => {\n          this.$message({\n            type: 'success',\n            message: '删除成功!'\n          })\n          await remove(val)\n          this.getDirectorysList()\n        })\n        .catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          })\n        })\n    },\n    // 清空表单\n    clear () {\n      this.directorysQuery = {\n        directoryName: '',\n        state: '',\n        page: 1,\n        pagesize: 5\n      }\n      this.getDirectorysList()\n    },\n    // 进行查询\n    onSearch () {\n      this.directorysQuery.page = 1\n      this.getDirectorysList()\n    },\n    // 渲染列表\n    async getDirectorysList () {\n      if (this.$route.query.id) {\n        this.formData.subjectID = this.$route.query.id\n        this.formData.subjectName = this.$route.query.name\n        const { data } = await list(this.formData)\n        console.log(data)\n        this.tableData = data.items\n        this.total = data.counts\n      } else {\n        const { data } = await list(this.directorysQuery)\n        // console.log(data)\n        this.tableData = data.items\n        this.total = data.counts\n      }\n    },\n    // 分页\n    handleSizeChange (size) {\n      this.directorysQuery.page = 1\n      this.directorysQuery.pagesize = size\n      this.getDirectorysList()\n    },\n    // 切换页面\n    handleCurrentChange (page) {\n      this.directorysQuery.page = page\n      this.getDirectorysList()\n    },\n    // 更新列表\n    updateList () {\n      this.directorysQuery.page = 1\n      this.getDirectorysList()\n    }\n    // 自定义索引列\n    // indexMethod (index) {\n    //   return index + 1 + (this.page - 1) * this.size\n    // }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.el-table .el-table__cell{\n  text-align: center;\n}\n</style>\n"]}]}